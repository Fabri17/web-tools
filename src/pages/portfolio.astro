---
// Portfolio page - No Layout to avoid FavoritesBar and Footer
const skills = [
  { name: "Flutter", level: 95, icon: "ÔøΩ", color: "#FF6B35" },
  { name: "C# / .NET", level: 88, icon: "‚ö°", color: "#FF8C42" },
  { name: "Android", level: 90, icon: "ÔøΩ", color: "#FF6B35" },
  { name: "iOS", level: 85, icon: "ÔøΩ", color: "#004E89" },
  { name: "Dart", level: 92, icon: "ÔøΩÔ∏è", color: "#FF8C42" },
  { name: "Ruby on Rails", level: 80, icon: "ÔøΩ", color: "#FF4500" },
  { name: "Firebase", level: 90, icon: "üî•", color: "#FF6B35" },
  { name: "AWS", level: 75, icon: "‚òÅÔ∏è", color: "#FF8C42" },
  { name: "Git", level: 90, icon: "ÔøΩ", color: "#6B8E23" },
  { name: "REST APIs", level: 88, icon: "üåä", color: "#004E89" },
];

const achievements = [
  {
    title: "Hokage Developer",
    description: "6+ years mastering mobile jutsu",
    icon: "üç•",
    unlocked: true,
  },
  {
    title: "Academy Star",
    description: "UCA Best student & awarded ninja",
    icon: "üìú",
    unlocked: true,
  },
  {
    title: "Team Captain",
    description: "Led Squad 7 of developers",
    icon: "ÔøΩ",
    unlocked: true,
  },
  {
    title: "Shadow Clone Master",
    description: "Multi-platform ninja technique",
    icon: "ü•∑",
    unlocked: true,
  },
  {
    title: "Cloud Village Sage",
    description: "Firebase & AWS summoning jutsu",
    icon: "‚òÅÔ∏è",
    unlocked: true,
  },
  {
    title: "Crypto Ninja",
    description: "Bitcoin payment seal master",
    icon: "üí∞",
    unlocked: true,
  },
];

const experience = [
  {
    role: "C# Developer",
    company: "First American",
    period: "Oct 2025 - Present",
    description:
      "Currently developing enterprise solutions with C# and .NET framework. Working on robust backend systems and business logic implementation for financial services applications.",
    tech: ["C#", ".NET", "SQL Server", "Enterprise Apps"],
  },
  {
    role: "Mobile Developer",
    company: "First American",
    period: "Mar 2025 - Oct 2025",
    description:
      "Maintained native Android applications, fixing critical bugs and implementing product requirements to ensure stability and continuous improvement of enterprise-level mobile apps.",
    tech: ["Android", "Kotlin", "Java", "Mobile Enterprise"],
  },
  {
    role: "Lead Flutter Developer",
    company: "Cabal App (StartUp)",
    period: "Jun 2022 - Feb 2025",
    description:
      "Led complete mobile frontend development, making strategic technical decisions on navigation, state management, performance and UX. Designed and implemented Flutter app with clean architecture. Collaborated actively on backend development with Ruby on Rails, delivering integrated solutions aligned with business goals.",
    tech: [
      "Flutter",
      "Dart",
      "Ruby on Rails",
      "Clean Architecture",
      "Firebase",
    ],
  },
  {
    role: "Flutter Developer",
    company: "Tres Astronautas",
    period: "Dec 2020 - May 2022",
    description:
      "Developed robust and scalable mobile applications using Flutter across music, health, and e-commerce sectors. Integrated and managed Firebase cloud services including authentication, real-time database, storage and push notifications. Contributed to defining best practices for architecture, maintainability and code scalability.",
    tech: ["Flutter", "Firebase", "Cloud Services", "Agile"],
  },
  {
    role: "Full-stack .NET Developer",
    company: "Grupo Lexa",
    period: "Jun 2019 - Dec 2020",
    description:
      "Specialized in comprehensive development of mobile, web and desktop solutions using .NET technologies. Built full-stack applications handling both frontend and backend development.",
    tech: [".NET", "C#", "SQL Server", "Web Development"],
  },
];

const projects = [
  {
    name: "Bitcoin Payment Gateway",
    description:
      "Custom Bitcoin payment gateway using BTCPay Server integrated with WordPress. Configured server from scratch, implemented reCAPTCHA for security, and optimized checkout flow. Enables merchants to accept Bitcoin payments securely without intermediaries.",
    tech: ["BTCPay Server", "WordPress", "Bitcoin", "PHP"],
    link: "#",
    stars: 3500,
  },
  {
    name: "Romero Para Todos",
    description:
      "Mobile app for El Salvador's Catholic community. Led complete project lifecycle from concept to App Store deployment. Managed all phases including UX design, Flutter development, Firebase integration, analytics, and publishing strategies.",
    tech: ["Flutter", "Firebase", "UX Design", "Analytics"],
    link: "#",
    stars: 2800,
  },
  {
    name: "Cabal App",
    description:
      "Led mobile frontend development for logistics startup. Built with clean architecture Flutter, integrating with Ruby on Rails backend for real-time tracking and delivery management.",
    tech: ["Flutter", "Clean Architecture", "Ruby on Rails"],
    link: "#",
    stars: 2500,
  },
  {
    name: "UCA Maps & FitGain",
    description:
      "Two award-winning university apps that earned recognition as best student projects. UCA Maps for campus navigation with real-time location, and FitGain for fitness tracking and health monitoring.",
    tech: ["Android", "Kotlin", "Firebase", "Google Maps"],
    link: "#",
    stars: 1800,
  },
  {
    name: "Employment System for People with Disabilities",
    description:
      "Inclusive job search platform designed to help people with disabilities find employment opportunities. Built with Kotlin and Firebase, featuring intuitive interface, real-time database, and secure authentication.",
    tech: ["Kotlin", "Firebase", "Android", "Accessibility"],
    link: "#",
    stars: 1600,
  },
  {
    name: "WordPress Security Enhancement",
    description:
      "Comprehensive security improvement project for WordPress sites. Implemented advanced security measures, hardening techniques, and monitoring systems to protect against common vulnerabilities.",
    tech: ["WordPress", "Security", "PHP", "Network Security"],
    link: "#",
    stars: 1400,
  },
];
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Fabricio Hern√°ndez - Software Engineer Portfolio</title>
    <meta
      name="description"
      content="Software Engineer with 6+ years of experience building Flutter, Android & iOS apps. Led projects in music, logistics, and e-commerce."
    />
    <meta
      name="keywords"
      content="Flutter Developer, Android Developer, iOS Developer, Mobile Developer, Fabricio Hern√°ndez, El Salvador"
    />
    <meta name="author" content="Fabricio Hern√°ndez" />
    <meta name="theme-color" content="#1a1a2e" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />

    <!-- Open Graph / Social Media -->
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Fabricio Hern√°ndez - Mobile Developer" />
    <meta
      property="og:description"
      content="Mobile Developer with 6+ years building Flutter, Android & iOS apps"
    />
    <meta property="og:image" content="/og-portfolio.png" />

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta
      name="twitter:title"
      content="Fabricio Hern√°ndez - Mobile Developer"
    />
    <meta
      name="twitter:description"
      content="Mobile Developer with 6+ years building Flutter, Android & iOS apps"
    />
  </head>
  <body>
    <div class="portfolio-container">
      <!-- Pixel Art Header -->
      <div class="pixel-header">
        <div class="stars-bg"></div>

        <!-- Battle Arena -->
        <div class="battle-arena">
          <!-- Desert Rock Formations -->
          <div class="rock-formation rock-left"></div>
          <div class="rock-formation rock-right"></div>

          <div class="arena-floor"></div>

          <!-- Player Character -->
          <div class="player-fighter">
            <div class="fighter-sprite">
              <div class="head">
                <div class="eye-left"></div>
                <div class="eye-right"></div>
                <div class="mouth"></div>
              </div>
              <div class="body"></div>
              <div class="arm left punch"></div>
              <div class="arm right punch"></div>
              <div class="leg left"></div>
              <div class="leg right"></div>
              <div class="chakra-aura"></div>
              <div class="speed-lines"></div>
            </div>
            <div class="fighter-shadow"></div>
            <div class="health-bar player-health">
              <div class="health-label">FABRICIO</div>
              <div class="health-fill"></div>
            </div>
          </div>

          <!-- Code Enemy -->
          <div class="code-enemy">
            <div class="enemy-body">
              <div class="enemy-screen">
                <div class="code-line"></div>
                <div class="code-line"></div>
                <div class="code-line"></div>
                <div class="code-line error"></div>
              </div>
              <div class="enemy-eyes">
                <div class="eye left"></div>
                <div class="eye right"></div>
              </div>
            </div>
            <div class="enemy-shadow"></div>
            <div class="health-bar enemy-health">
              <div class="health-label">BUG BOSS</div>
              <div class="health-fill"></div>
            </div>
          </div>

          <!-- Battle Effects -->
          <div class="battle-effects">
            <!-- Kunai attacks from player -->
            <div class="kunai kunai-1">üó°Ô∏è</div>
            <div class="kunai kunai-2">üó°Ô∏è</div>
            <div class="kunai kunai-3">üó°Ô∏è</div>

            <!-- Sprite effects for kunai impacts -->
            <img src="/src/assets/1.png" class="sprite-effect sprite-1" alt="" />
            <img src="/src/assets/2.png" class="sprite-effect sprite-2" alt="" />
            <img src="/src/assets/3.png" class="sprite-effect sprite-3" alt="" />

            <!-- Amaterasu flames from enemy -->
            <div class="amaterasu">üî•</div>
            <div class="amaterasu-flame flame-1">üî•</div>
            <div class="amaterasu-flame flame-2">üî•</div>
            <div class="amaterasu-flame flame-3">üî•</div>

            <!-- Sprite effect for Amaterasu -->
            <img src="/src/assets/2.png" class="sprite-effect sprite-amaterasu" alt="" />

            <!-- Rasenshuriken from player -->
            <div class="rasenshuriken">üåÄ‚≠ê</div>

            <!-- Sprite effect for Rasenshuriken impact -->
            <img src="/src/assets/3.png" class="sprite-effect sprite-rasenshuriken" alt="" />

            <div class="hit-effect"></div>
            <div class="code-particle">{}</div>
            <div class="code-particle">[ ]</div>
            <div class="code-particle">&lt;/&gt;</div>
            <div class="code-particle">( )</div>
          </div>

          <!-- VS Badge -->
          <div class="vs-badge">VS</div>

          <!-- Battle Progress Indicator -->
          <div class="battle-progress-bar">
            <div class="battle-progress-fill"></div>
            <div class="battle-progress-text">SCROLL TO FIGHT</div>
          </div>
        </div>

        <div class="container">
          <div class="character-section">
            <div class="hero-content">
              <div class="game-text">
                <h1 class="pixel-title">
                  <span class="blink">üç•</span> FABRICIO HERN√ÅNDEZ
                </h1>
                <p class="pixel-subtitle">
                  Code Ninja ‚Ä¢ Shadow Clone Developer
                </p>
                <div class="stats-bar">
                  <div class="stat">
                    <span class="stat-label">Ninja Rank:</span>
                    <span class="stat-value">J≈çnin</span>
                  </div>
                  <div class="stat">
                    <span class="stat-label">Experience:</span>
                    <span class="stat-value">6+ years</span>
                  </div>
                  <div class="stat">
                    <span class="stat-label">Village:</span>
                    <span class="stat-value">üçÉ El Salvador</span>
                  </div>
                </div>
                <div class="action-buttons">
                  <a href="#contact" class="pixel-button primary">
                    <span>üç• Start Mission</span>
                  </a>
                  <a href="#projects" class="pixel-button secondary">
                    <span>üó°Ô∏è View Jutsu</span>
                  </a>
                </div>
              </div>
            </div>
          </div>

          <!-- Health/Chakra bars -->
          <div class="status-bars">
            <div class="status-bar">
              <span class="bar-label">‚ö° CHAKRA (Energy Level)</span>
              <div class="bar health">
                <div class="bar-fill" style="width: 100%"></div>
              </div>
            </div>
            <div class="status-bar">
              <span class="bar-label">üåÄ NINE-TAILS MODE (Power)</span>
              <div class="bar mana">
                <div class="bar-fill" style="width: 95%"></div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Skills Section -->
      <section class="game-section skills-section" id="skills">
        <div class="container">
          <h2 class="section-title">
            <span class="title-icon">üó°Ô∏è</span>
            NINJA TECHNIQUES
            <span class="title-icon">üî•</span>
          </h2>

          <div class="skills-grid">
            {
              skills.map((skill) => (
                <div class="skill-card">
                  <div class="skill-header">
                    <span class="skill-icon">{skill.icon}</span>
                    <span class="skill-name">{skill.name}</span>
                  </div>
                  <div class="skill-bar">
                    <div
                      class="skill-progress"
                      style={`width: ${skill.level}%; background: ${skill.color}`}
                    >
                      <span class="skill-level">{skill.level}</span>
                    </div>
                  </div>
                </div>
              ))
            }
          </div>
        </div>
      </section>

      <!-- Achievements Section -->
      <section class="game-section achievements-section">
        <div class="container">
          <h2 class="section-title">
            <span class="title-icon">üìú</span>
            NINJA RANK ACHIEVEMENTS
            <span class="title-icon">ÔøΩ</span>
          </h2>

          <div class="achievements-grid">
            {
              achievements.map((achievement) => (
                <div
                  class={`achievement-card ${achievement.unlocked ? "unlocked" : "locked"}`}
                >
                  <div class="achievement-icon">{achievement.icon}</div>
                  <h3 class="achievement-title">{achievement.title}</h3>
                  <p class="achievement-desc">{achievement.description}</p>
                  {achievement.unlocked && (
                    <div class="unlock-badge">UNLOCKED</div>
                  )}
                </div>
              ))
            }
          </div>
        </div>
      </section>

      <!-- Experience Section -->
      <section class="game-section experience-section" id="experience">
        <div class="container">
          <h2 class="section-title">
            <span class="title-icon">ÔøΩ</span>
            MISSION HISTORY
            <span class="title-icon">üçÉ</span>
          </h2>

          <div class="timeline">
            {
              experience.map((exp, index) => (
                <div class="timeline-item">
                  <div class="timeline-marker">
                    <span class="marker-dot" />
                  </div>
                  <div class="timeline-content">
                    <div class="quest-card">
                      <div class="quest-header">
                        <h3 class="quest-title">{exp.role}</h3>
                        <span
                          class={`quest-status ${index === 0 ? "in-progress" : ""}`}
                        >
                          {index === 0 ? "IN PROGRESS" : "COMPLETED"}
                        </span>
                      </div>
                      <div class="quest-details">
                        <span class="company">{exp.company}</span>
                        <span class="period">{exp.period}</span>
                      </div>
                      <p class="quest-description">{exp.description}</p>
                      <div class="tech-tags">
                        {exp.tech.map((tech) => (
                          <span class="tech-tag">{tech}</span>
                        ))}
                      </div>
                    </div>
                  </div>
                </div>
              ))
            }
          </div>
        </div>
      </section>

      <!-- Projects Section -->
      <section class="game-section projects-section" id="projects">
        <div class="container">
          <h2 class="section-title">
            <span class="title-icon">ÔøΩ</span>
            LEGENDARY JUTSU
            <span class="title-icon">‚ö°</span>
          </h2>

          <div class="projects-grid">
            {
              projects.map((project) => (
                <div class="project-card">
                  <div class="project-header">
                    <h3 class="project-name">{project.name}</h3>
                    <div class="project-stars">
                      <span class="star-icon">‚≠ê</span>
                      <span class="star-count">{project.stars}</span>
                    </div>
                  </div>
                  <p class="project-description">{project.description}</p>
                  <div class="project-tech">
                    {project.tech.map((tech) => (
                      <span class="tech-badge">{tech}</span>
                    ))}
                  </div>
                </div>
              ))
            }
          </div>
        </div>
      </section>

      <!-- Contact Section -->
      <section class="game-section contact-section" id="contact">
        <div class="container">
          <h2 class="section-title">
            <span class="title-icon">ü¶ä</span>
            SUMMON THE NINJA
            <span class="title-icon">üç•</span>
          </h2>

          <div class="contact-box">
            <div class="dialog-box">
              <p class="dialog-text">
                <span class="blink">üç•</span> Believe it! Let's build something amazing
                together!
                <br /><br />
                Code ninja with 6+ years mastering mobile jutsu and full-stack techniques.
                Specialized in Flutter and .NET shadow clones, I've completed S-rank
                missions in music, logistics, and e-commerce villages. Known for
                adapting like a true shinobi to new technologies and delivering powerful,
                scalable solutions with the determination of becoming the Hokage
                of developers!
              </p>

              <div class="contact-buttons">
                <a
                  href="mailto:fabricioenrique123@gmail.com"
                  class="contact-btn"
                >
                  <span>üìß Send Scroll</span>
                </a>
                <a
                  href="https://github.com/Fabri17"
                  target="_blank"
                  rel="noopener noreferrer"
                  class="contact-btn"
                >
                  <span>üêô GitHub Dojo</span>
                </a>
                <a
                  href="https://www.linkedin.com/in/fabricio-hernandez17/"
                  target="_blank"
                  rel="noopener noreferrer"
                  class="contact-btn"
                >
                  <span>üíº LinkedIn Village</span>
                </a>
                <a href="tel:+50372610041" class="contact-btn">
                  <span>üìû Summoning Jutsu</span>
                </a>
              </div>
            </div>

            <div class="game-stats">
              <div class="stat-item">
                <span class="stat-icon">üçÉ</span>
                <span class="stat-text">Hidden Leaf Village ‚Ä¢ San Salvador</span
                >
              </div>
              <div class="stat-item">
                <span class="stat-icon">ü¶ä</span>
                <span class="stat-text">Flutter & Mobile Ninja Master</span>
              </div>
              <div class="stat-item">
                <span class="stat-icon">‚ö°</span>
                <span class="stat-text"
                  >Never gives up! That's my ninja way</span
                >
              </div>
            </div>
          </div>
        </div>
      </section>
    </div>
  </body>
</html>

<script>
  // Scroll-based battle system
  let lastScrollProgress = 0;
  let battlePhase = 0;

  function updateBattle() {
    const scrollHeight = document.documentElement.scrollHeight - window.innerHeight;
    const scrollProgress = Math.min(window.scrollY / scrollHeight, 1);
    
    // Update CSS variable for scroll progress
    document.documentElement.style.setProperty('--scroll-progress', scrollProgress.toString());
    
    // Battle phases based on scroll progress
    const arena = document.querySelector('.battle-arena');
    const playerFighter = document.querySelector('.player-fighter');
    const codeEnemy = document.querySelector('.code-enemy');
    const battleEffects = document.querySelector('.battle-effects');
    const progressFill = document.querySelector('.battle-progress-fill') as HTMLElement;
    const progressText = document.querySelector('.battle-progress-text') as HTMLElement;
    const playerHealthFill = document.querySelector('.player-health .health-fill') as HTMLElement;
    const enemyHealthFill = document.querySelector('.enemy-health .health-fill') as HTMLElement;
    
    if (!arena) return;

    // Update progress bar
    if (progressFill) {
      progressFill.style.width = `${scrollProgress * 100}%`;
    }

    // Update health bars based on battle progress
    if (playerHealthFill) {
      // Player takes damage from Amaterasu (45-60%)
      let playerHealth = 100;
      if (scrollProgress >= 0.45 && scrollProgress < 0.70) {
        playerHealth = 100 - ((scrollProgress - 0.45) / 0.25) * 30; // Loses 30% health
      } else if (scrollProgress >= 0.70) {
        playerHealth = 70; // Recovers after dodging
      }
      playerHealthFill.style.width = `${playerHealth}%`;
    }

    if (enemyHealthFill) {
      // Enemy takes damage progressively
      let enemyHealth = 100;
      if (scrollProgress >= 0.15) {
        // Takes damage from kunais (15-30%)
        if (scrollProgress < 0.30) {
          enemyHealth = 100 - ((scrollProgress - 0.15) / 0.15) * 20;
        }
        // More damage from kunais (30-45%)
        else if (scrollProgress < 0.45) {
          enemyHealth = 80 - ((scrollProgress - 0.30) / 0.15) * 10;
        }
        // Stable during Amaterasu attack (45-85%)
        else if (scrollProgress < 0.85) {
          enemyHealth = 70;
        }
        // Final Rasenshuriken damage (85-100%)
        else {
          enemyHealth = 70 - ((scrollProgress - 0.85) / 0.15) * 70;
        }
      }
      enemyHealthFill.style.width = `${Math.max(0, enemyHealth)}%`;
    }

    // Update progress text
    if (progressText) {
      if (scrollProgress < 0.15) {
        progressText.textContent = 'READY...';
      } else if (scrollProgress < 0.30) {
        progressText.textContent = 'KUNAI BARRAGE!';
      } else if (scrollProgress < 0.45) {
        progressText.textContent = 'ENEMY HIT!';
      } else if (scrollProgress < 0.60) {
        progressText.textContent = 'AMATERASU ATTACK!';
      } else if (scrollProgress < 0.70) {
        progressText.textContent = 'DODGE!';
      } else if (scrollProgress < 0.85) {
        progressText.textContent = 'CHARGING CHAKRA...';
      } else if (scrollProgress < 0.95) {
        progressText.textContent = 'RASENSHURIKEN!!!';
      } else {
        progressText.textContent = 'VICTORY! üç•';
      }
    }

    // Phase 1: Initial stance (0-15%)
    if (scrollProgress < 0.15) {
      battlePhase = 0;
      arena.setAttribute('data-phase', 'stance');
    }
    // Phase 2: Kunai attacks (15-30%)
    else if (scrollProgress < 0.30) {
      if (battlePhase !== 1) {
        battlePhase = 1;
        arena.setAttribute('data-phase', 'kunai-attack');
        createKunaiBarrage();
      }
    }
    // Phase 3: Enemy dodge and counter (30-45%)
    else if (scrollProgress < 0.45) {
      if (battlePhase !== 2) {
        battlePhase = 2;
        arena.setAttribute('data-phase', 'enemy-counter');
      }
    }
    // Phase 4: Amaterasu flames (45-60%)
    else if (scrollProgress < 0.60) {
      if (battlePhase !== 3) {
        battlePhase = 3;
        arena.setAttribute('data-phase', 'amaterasu');
        createFlameBarrage();
      }
    }
    // Phase 5: Player dodge (60-70%)
    else if (scrollProgress < 0.70) {
      if (battlePhase !== 4) {
        battlePhase = 4;
        arena.setAttribute('data-phase', 'dodge');
      }
    }
    // Phase 6: Rasenshuriken charge (70-85%)
    else if (scrollProgress < 0.85) {
      if (battlePhase !== 5) {
        battlePhase = 5;
        arena.setAttribute('data-phase', 'rasenshuriken-charge');
      }
    }
    // Phase 7: Final attack (85-95%)
    else if (scrollProgress < 0.95) {
      if (battlePhase !== 6) {
        battlePhase = 6;
        arena.setAttribute('data-phase', 'final-attack');
        createRasenshurikenImpact();
      }
    }
    // Phase 8: Victory (95-100%)
    else {
      if (battlePhase !== 7) {
        battlePhase = 7;
        arena.setAttribute('data-phase', 'victory');
        showVictory();
      }
    }

    lastScrollProgress = scrollProgress;
  }

  function createKunaiBarrage() {
    const battleEffects = document.querySelector('.battle-effects');
    if (!battleEffects) return;

    for (let i = 0; i < 8; i++) {
      setTimeout(() => {
        const kunai = document.createElement('div');
        kunai.className = 'scroll-kunai';
        kunai.textContent = 'üó°Ô∏è';
        kunai.style.left = '15%';
        kunai.style.bottom = `${50 + Math.random() * 100}px`;
        kunai.style.animationDelay = `${i * 0.1}s`;
        battleEffects.appendChild(kunai);
        
        setTimeout(() => kunai.remove(), 2000);
      }, i * 150);
    }
  }

  function createFlameBarrage() {
    const battleEffects = document.querySelector('.battle-effects');
    if (!battleEffects) return;

    for (let i = 0; i < 10; i++) {
      setTimeout(() => {
        const flame = document.createElement('div');
        flame.className = 'scroll-flame';
        flame.textContent = 'üî•';
        flame.style.right = '15%';
        flame.style.bottom = `${40 + Math.random() * 120}px`;
        flame.style.animationDelay = `${i * 0.08}s`;
        battleEffects.appendChild(flame);
        
        setTimeout(() => flame.remove(), 2500);
      }, i * 120);
    }
  }

  function createRasenshurikenImpact() {
    const battleEffects = document.querySelector('.battle-effects');
    if (!battleEffects) return;

    const rasenshuriken = document.createElement('div');
    rasenshuriken.className = 'scroll-rasenshuriken';
    rasenshuriken.innerHTML = 'üåÄ‚≠ê';
    rasenshuriken.style.left = '15%';
    rasenshuriken.style.bottom = '80px';
    battleEffects.appendChild(rasenshuriken);

    // Create massive impact effect
    setTimeout(() => {
      const impact = document.createElement('div');
      impact.className = 'scroll-impact';
      impact.style.right = '15%';
      impact.style.bottom = '60px';
      battleEffects.appendChild(impact);
      
      // Add sprite effects
      for (let i = 1; i <= 3; i++) {
        const sprite = document.createElement('img');
        sprite.src = `/src/assets/${i}.png`;
        sprite.className = 'scroll-sprite-explosion';
        sprite.style.right = `${10 + Math.random() * 15}%`;
        sprite.style.bottom = `${50 + Math.random() * 40}px`;
        sprite.style.animationDelay = `${i * 0.1}s`;
        battleEffects.appendChild(sprite);
        
        setTimeout(() => sprite.remove(), 1500);
      }
      
      setTimeout(() => impact.remove(), 1000);
    }, 1500);

    setTimeout(() => rasenshuriken.remove(), 3000);
  }

  function showVictory() {
    const arena = document.querySelector('.battle-arena');
    if (!arena) return;

    // Create victory text
    const victoryText = document.createElement('div');
    victoryText.className = 'victory-banner';
    victoryText.innerHTML = 'üç• VICTORY! üç•<br><span>BUG DEFEATED</span>';
    arena.appendChild(victoryText);

    // Confetti effect
    for (let i = 0; i < 30; i++) {
      setTimeout(() => {
        const confetti = document.createElement('div');
        confetti.className = 'confetti';
        confetti.textContent = ['üçÉ', 'üç•', '‚≠ê', 'üî•', '‚ö°'][Math.floor(Math.random() * 5)];
        confetti.style.left = `${Math.random() * 100}%`;
        confetti.style.top = '-50px';
        confetti.style.animationDelay = `${Math.random() * 0.5}s`;
        arena.appendChild(confetti);
        
        setTimeout(() => confetti.remove(), 3000);
      }, i * 50);
    }
  }

  // Throttle scroll events for performance
  let scrollTimeout: number | undefined;
  window.addEventListener('scroll', () => {
    if (scrollTimeout) {
      window.cancelAnimationFrame(scrollTimeout);
    }
    scrollTimeout = window.requestAnimationFrame(() => {
      updateBattle();
    });
  });

  // Initial call
  updateBattle();
</script>

<style>
  /* ========================================
     8-BIT PORTFOLIO STYLES
     Pixel Perfect Design System
     ======================================== */

  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }

  html {
    scroll-behavior: smooth;
  }

  body {
    margin: 0;
    padding: 0;
    background: #1a1a1a;
    color: #f0f0f0;
    font-family:
      system-ui,
      -apple-system,
      sans-serif;
    overflow-x: hidden;
    position: relative;
  }

  /* Falling leaves effect */
  body::before {
    content: "üçÉ üçÇ üçÉ üçÇ üçÉ üçÇ üçÉ üçÇ üçÉ üçÇ üçÉ üçÇ üçÉ üçÇ üçÉ üçÇ";
    position: fixed;
    top: -50px;
    left: 0;
    width: 100%;
    font-size: 2rem;
    opacity: 0.15;
    animation: falling-leaves 25s linear infinite;
    pointer-events: none;
    z-index: 1;
    letter-spacing: 3rem;
  }

  @keyframes falling-leaves {
    0% {
      transform: translateY(-50px) translateX(0);
      opacity: 0.15;
    }
    50% {
      opacity: 0.25;
    }
    100% {
      transform: translateY(110vh) translateX(-100px);
      opacity: 0;
    }
  }

  .portfolio-container {
    min-height: 100vh;
    background: #1a1a1a;
    color: #f0f0f0;
    position: relative;
  }

  /* ===== PIXEL HEADER ===== */
  .pixel-header {
    position: relative;
    min-height: 100vh;
    background: linear-gradient(180deg, #1a1a1a 0%, #2d1810 50%, #1a1a1a 100%);
    overflow: hidden;
    padding: 2rem 0;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    align-items: center;
  }

  /* Naruto spiral pattern */
  .pixel-header::after {
    content: "üç•";
    position: absolute;
    top: 10%;
    right: 10%;
    font-size: 15rem;
    opacity: 0.03;
    animation: rotate-slow 60s linear infinite;
    pointer-events: none;
  }

  @keyframes rotate-slow {
    from {
      transform: rotate(0deg);
    }
    to {
      transform: rotate(360deg);
    }
  }

  .stars-bg {
    position: absolute;
    inset: 0;
    background-image: radial-gradient(2px 2px at 20% 30%, white, transparent),
      radial-gradient(2px 2px at 60% 70%, white, transparent),
      radial-gradient(1px 1px at 50% 50%, white, transparent),
      radial-gradient(1px 1px at 80% 10%, white, transparent),
      radial-gradient(2px 2px at 90% 60%, white, transparent),
      radial-gradient(1px 1px at 33% 80%, white, transparent);
    background-size: 200% 200%;
    animation: stars-twinkle 20s linear infinite;
  }

  @keyframes stars-twinkle {
    0%,
    100% {
      opacity: 0.8;
    }
    50% {
      opacity: 1;
    }
  }

  .character-section {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    position: relative;
    z-index: 1;
    margin-top: 420px;
    width: 100%;
    padding: 2rem 0;
  }

  /* ===== BATTLE ARENA ===== */
  .battle-arena {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    z-index: 100;
    perspective: 1000px;
    pointer-events: none;
    background: transparent;
    overflow: visible;
  }

  /* Full screen battle background overlay */
  .battle-arena::before {
    content: "";
    position: absolute;
    inset: 0;
    background: radial-gradient(
      ellipse at center,
      rgba(255, 107, 53, 0.05) 0%,
      transparent 60%
    );
    pointer-events: none;
    opacity: 0;
    transition: opacity 0.5s ease-out;
  }

  .battle-arena[data-phase="rasenshuriken-charge"]::before,
  .battle-arena[data-phase="final-attack"]::before {
    opacity: 1;
  }

  /* Removed - arena now fullscreen */

  /* Player Fighter */
  .player-fighter {
    position: fixed;
    left: 5%;
    top: 70%;
    z-index: 110;
    filter: drop-shadow(0 5px 10px rgba(0, 0, 0, 0.6));
    transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
    transform: scale(1.2);
    pointer-events: none;
  }

  @keyframes fighter-battle-sequence {
    /* Ready stance with breathing motion */
    0%, 8% {
      transform: translateY(0) translateX(0) scale(1);
    }
    4% {
      transform: translateY(-2px) translateX(0) scale(1.01);
    }
    
    /* Quick step forward for kunai throw */
    10% {
      transform: translateY(-8px) translateX(20px) scale(1.05) rotate(5deg);
    }
    12% {
      transform: translateY(-4px) translateX(25px) scale(1.02) rotate(8deg);
    }
    15% {
      transform: translateY(0) translateX(15px) scale(1) rotate(3deg);
    }
    18% {
      transform: translateY(0) translateX(0) scale(1) rotate(0deg);
    }
    
    /* Prepare for dodge - crouch slightly */
    28% {
      transform: translateY(10px) translateX(0) scale(1, 0.95);
    }
    
    /* Dynamic dodge with flip - jump back and rotate */
    30% {
      transform: translateY(-60px) translateX(-40px) scale(1.1) rotate(-25deg);
    }
    33% {
      transform: translateY(-70px) translateX(-50px) scale(1.15) rotate(-40deg);
    }
    36% {
      transform: translateY(-50px) translateX(-45px) scale(1.1) rotate(-50deg);
    }
    39% {
      transform: translateY(-20px) translateX(-30px) scale(1.05) rotate(-60deg);
    }
    42% {
      transform: translateY(0) translateX(-10px) scale(1) rotate(-65deg);
    }
    
    /* Land and recover stance */
    45% {
      transform: translateY(5px) translateX(0) scale(1, 0.9) rotate(0deg);
    }
    48%, 54% {
      transform: translateY(0) translateX(0) scale(1) rotate(0deg);
    }
    
    /* Charge chakra for Rasenshuriken */
    56% {
      transform: translateY(-5px) translateX(0) scale(1.05);
    }
    58% {
      transform: translateY(-8px) translateX(0) scale(1.08);
    }
    
    /* Powerful forward dash for Rasenshuriken */
    60% {
      transform: translateY(-15px) translateX(30px) scale(1.1) rotate(10deg);
    }
    63% {
      transform: translateY(-12px) translateX(40px) scale(1.08) rotate(15deg);
    }
    66% {
      transform: translateY(-8px) translateX(35px) scale(1.05) rotate(12deg);
    }
    
    /* Throw Rasenshuriken with full force */
    69% {
      transform: translateY(-5px) translateX(25px) scale(1.02) rotate(8deg);
    }
    72% {
      transform: translateY(0) translateX(10px) scale(1) rotate(3deg);
    }
    
    /* Return to stance with victory pose */
    75% {
      transform: translateY(0) translateX(0) scale(1) rotate(0deg);
    }
    78% {
      transform: translateY(-3px) translateX(0) scale(1.02);
    }
    82%, 100% {
      transform: translateY(0) translateX(0) scale(1);
    }
  }

  .fighter-sprite {
    width: 120px;
    height: 150px;
    position: relative;
    image-rendering: pixelated;
  }

  .fighter-sprite .head {
    position: absolute;
    width: 50px;
    height: 50px;
    background: linear-gradient(135deg, #ffcc99 0%, #ffb380 100%);
    top: 0;
    left: 50%;
    transform: translateX(-50%);
    box-shadow:
      inset -3px -3px 0 rgba(0, 0, 0, 0.2),
      inset 3px 3px 0 rgba(255, 255, 255, 0.3),
      3px 3px 0 #000;
    border-radius: 8px 8px 12px 12px;
  }

  /* Hair/Spiky style */
  .fighter-sprite .head::before {
    content: "";
    position: absolute;
    width: 12px;
    height: 18px;
    background: #ffa500;
    top: -12px;
    left: 8px;
    clip-path: polygon(0% 100%, 50% 0%, 100% 100%);
    box-shadow:
      15px 0 0 #ffa500,
      30px 2px 0 #ffa500,
      -5px 3px 0 #ff8c00,
      20px -2px 0 #ff8c00;
  }

  /* Headband */
  .fighter-sprite .head::after {
    content: "üçÉ";
    position: absolute;
    width: 48px;
    height: 20px;
    background: linear-gradient(135deg, #004e89 0%, #0066b3 100%);
    top: 8px;
    left: 1px;
    box-shadow:
      3px 0 0 #000,
      -3px 0 0 #000,
      0 3px 0 #000,
      inset 0 2px 2px rgba(255, 255, 255, 0.3);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 12px;
    border-radius: 2px;
  }

  /* Eyes and facial features */
  .fighter-sprite .head {
    position: relative;
  }

  /* Eyes */
  .fighter-sprite .eye-left,
  .fighter-sprite .eye-right {
    position: absolute;
    width: 6px;
    height: 6px;
    background: #000;
    border-radius: 50%;
    top: 30px;
    animation: eye-blink 4s infinite;
  }

  .fighter-sprite .eye-left {
    left: 12px;
  }

  .fighter-sprite .eye-right {
    right: 12px;
  }

  @keyframes eye-blink {
    0%, 48%, 52%, 100% {
      height: 6px;
      opacity: 1;
    }
    50% {
      height: 1px;
      opacity: 0.8;
    }
  }

  /* Mouth - determined expression */
  .fighter-sprite .mouth {
    position: absolute;
    width: 12px;
    height: 3px;
    background: #000;
    bottom: 12px;
    left: 50%;
    transform: translateX(-50%);
    border-radius: 0 0 4px 4px;
  }

  /* Chakra aura effect */
  .fighter-sprite .chakra-aura {
    position: absolute;
    width: 140px;
    height: 170px;
    top: -10px;
    left: 50%;
    transform: translateX(-50%);
    opacity: 0;
    pointer-events: none;
    background: radial-gradient(
      ellipse at center,
      rgba(255, 140, 66, 0.4) 0%,
      rgba(255, 107, 53, 0.3) 30%,
      rgba(255, 140, 66, 0.2) 50%,
      transparent 70%
    );
    border-radius: 50%;
    animation: chakra-pulse 8s ease-in-out infinite;
    filter: blur(8px);
  }

  @keyframes chakra-pulse {
    0%, 50%, 100% {
      opacity: 0;
      transform: translateX(-50%) scale(1);
    }
    56%, 65% {
      opacity: 0.6;
      transform: translateX(-50%) scale(1.15);
    }
    58% {
      opacity: 0.8;
      transform: translateX(-50%) scale(1.2);
    }
  }

  /* Speed lines effect */
  .fighter-sprite .speed-lines {
    position: absolute;
    width: 80px;
    height: 4px;
    left: -80px;
    top: 75px;
    opacity: 0;
    pointer-events: none;
    background: linear-gradient(
      90deg,
      transparent 0%,
      rgba(255, 140, 66, 0.6) 50%,
      rgba(255, 107, 53, 0.8) 100%
    );
    box-shadow:
      0 -15px 0 -2px rgba(255, 140, 66, 0.4),
      0 -30px 0 -3px rgba(255, 140, 66, 0.3),
      0 15px 0 -2px rgba(255, 140, 66, 0.4),
      0 30px 0 -3px rgba(255, 140, 66, 0.3);
    animation: speed-lines-dash 8s ease-in-out infinite;
  }

  @keyframes speed-lines-dash {
    0%, 9%, 29%, 100% {
      opacity: 0;
      left: -80px;
    }
    10%, 18% {
      opacity: 0.8;
      left: -50px;
    }
    30%, 42% {
      opacity: 0.9;
      left: 100px;
      transform: scaleX(-1);
    }
    43%, 59% {
      opacity: 0;
    }
    60%, 72% {
      opacity: 0.8;
      left: -40px;
      transform: scaleX(1);
    }
  }

  .fighter-sprite .body {
    position: absolute;
    width: 60px;
    height: 50px;
    background: linear-gradient(135deg, #ff6b35 0%, #ff8c42 50%, #ffa055 100%);
    top: 55px;
    left: 50%;
    transform: translateX(-50%);
    box-shadow: 
      3px 3px 0 #000,
      inset -2px -2px 4px rgba(0, 0, 0, 0.3),
      inset 2px 2px 4px rgba(255, 255, 255, 0.2);
    animation: body-breathing 3s ease-in-out infinite;
    border-radius: 4px 4px 8px 8px;
    position: relative;
  }

  @keyframes body-breathing {
    0%, 100% {
      transform: translateX(-50%) scaleY(1);
    }
    50% {
      transform: translateX(-50%) scaleY(1.05);
    }
  }

  /* Jacket zipper detail */
  .fighter-sprite .body::before {
    content: "";
    position: absolute;
    width: 4px;
    height: 40px;
    background: linear-gradient(180deg, #333 0%, #555 50%, #333 100%);
    top: 5px;
    left: 50%;
    transform: translateX(-50%);
    box-shadow: 
      0 0 0 1px #000,
      0 10px 0 #666,
      0 20px 0 #666,
      0 30px 0 #666;
  }

  /* Uzumaki spiral on body */
  .fighter-sprite .body::after {
    content: "üç•";
    position: absolute;
    top: 50%;
    right: 8px;
    transform: translateY(-50%);
    font-size: 16px;
    opacity: 0.8;
    animation: spiral-glow 2s ease-in-out infinite;
  }

  @keyframes spiral-glow {
    0%, 100% {
      opacity: 0.8;
      filter: drop-shadow(0 0 2px rgba(255, 107, 53, 0.5));
    }
    50% {
      opacity: 1;
      filter: drop-shadow(0 0 6px rgba(255, 107, 53, 0.9));
    }
  }

  .fighter-sprite .arm {
    position: absolute;
    width: 20px;
    height: 45px;
    background: linear-gradient(180deg, #ffcc99 0%, #ffb380 70%, #ffa060 100%);
    top: 60px;
    box-shadow: 
      3px 3px 0 #000,
      inset -1px -1px 2px rgba(0, 0, 0, 0.2),
      inset 1px 1px 2px rgba(255, 255, 255, 0.3);
    transform-origin: top center;
    border-radius: 8px;
  }

  /* Glove/hand detail */
  .fighter-sprite .arm::after {
    content: "";
    position: absolute;
    width: 22px;
    height: 12px;
    background: linear-gradient(135deg, #333 0%, #555 100%);
    bottom: -2px;
    left: -1px;
    border-radius: 0 0 6px 6px;
    box-shadow: 
      2px 2px 0 #000,
      inset 0 1px 1px rgba(255, 255, 255, 0.2);
  }

  .fighter-sprite .arm.left.punch {
    left: 20px;
    animation: punch-left 2s ease-in-out infinite;
  }

  .fighter-sprite .arm.right.punch {
    right: 20px;
    animation: punch-right 2s ease-in-out infinite;
  }

  @keyframes punch-left {
    0%, 8% {
      transform: rotate(0deg) translateX(0);
    }
    /* Wind up */
    10% {
      transform: rotate(20deg) translateX(5px);
    }
    /* Kunai throw motion */
    12% {
      transform: rotate(-70deg) translateX(-35px) translateY(-10px);
    }
    15% {
      transform: rotate(-80deg) translateX(-40px) translateY(-15px);
    }
    18% {
      transform: rotate(-60deg) translateX(-30px) translateY(-8px);
    }
    22% {
      transform: rotate(0deg) translateX(0);
    }
    /* Guard during dodge */
    30%, 42% {
      transform: rotate(-30deg) translateX(-10px) translateY(-20px);
    }
    /* Back to ready */
    50%, 54% {
      transform: rotate(0deg) translateX(0);
    }
    /* Charge Rasenshuriken */
    56%, 58% {
      transform: rotate(-40deg) translateX(-15px) translateY(-25px);
    }
    /* Throw Rasenshuriken */
    60% {
      transform: rotate(-90deg) translateX(-45px) translateY(-20px);
    }
    63% {
      transform: rotate(-95deg) translateX(-50px) translateY(-25px);
    }
    69% {
      transform: rotate(-70deg) translateX(-35px) translateY(-15px);
    }
    75%, 100% {
      transform: rotate(0deg) translateX(0);
    }
  }

  @keyframes punch-right {
    0%, 8% {
      transform: rotate(0deg) translateX(0);
    }
    /* Support kunai throw */
    10%, 18% {
      transform: rotate(-20deg) translateX(-5px) translateY(-5px);
    }
    22% {
      transform: rotate(0deg) translateX(0);
    }
    /* Active guard during dodge */
    30%, 42% {
      transform: rotate(25deg) translateX(10px) translateY(-15px);
    }
    /* Ready stance */
    50%, 54% {
      transform: rotate(0deg) translateX(0);
    }
    /* Form Rasenshuriken */
    56% {
      transform: rotate(30deg) translateX(20px) translateY(-30px);
    }
    58% {
      transform: rotate(40deg) translateX(25px) translateY(-35px);
    }
    /* Throw with force */
    60% {
      transform: rotate(80deg) translateX(40px) translateY(-20px);
    }
    63% {
      transform: rotate(90deg) translateX(45px) translateY(-25px);
    }
    69% {
      transform: rotate(60deg) translateX(30px) translateY(-15px);
    }
    75% {
      transform: rotate(10deg) translateX(5px);
    }
    82%, 100% {
      transform: rotate(0deg) translateX(0);
    }
  }

  .fighter-sprite .leg {
    position: absolute;
    width: 22px;
    height: 45px;
    background: linear-gradient(180deg, #004e89 0%, #003566 70%, #002844 100%);
    top: 105px;
    box-shadow: 
      3px 3px 0 #000,
      inset -1px -1px 3px rgba(0, 0, 0, 0.3),
      inset 1px 1px 2px rgba(100, 150, 200, 0.3);
    border-radius: 6px;
  }

  /* Ninja shoes */
  .fighter-sprite .leg::after {
    content: "";
    position: absolute;
    width: 26px;
    height: 14px;
    background: linear-gradient(135deg, #1a1a1a 0%, #333 100%);
    bottom: -2px;
    left: -2px;
    border-radius: 0 0 8px 8px;
    box-shadow: 
      2px 2px 0 #000,
      inset 0 1px 1px rgba(255, 255, 255, 0.1);
  }

  .fighter-sprite .leg.left {
    left: 35px;
  }

  .fighter-sprite .leg.right {
    right: 35px;
  }

  .fighter-shadow {
    width: 100px;
    height: 15px;
    background: radial-gradient(ellipse at center, rgba(0, 0, 0, 0.5) 0%, rgba(0, 0, 0, 0.3) 50%, transparent 100%);
    border-radius: 50%;
    margin-top: 10px;
    animation: shadow-dynamic 8s ease-in-out infinite;
    filter: blur(3px);
  }

  @keyframes shadow-dynamic {
    0%, 8% {
      transform: scale(1) translateX(0);
      opacity: 0.5;
    }
    10%, 18% {
      transform: scale(1.1) translateX(15px);
      opacity: 0.6;
    }
    30%, 42% {
      transform: scale(0.8) translateX(-30px);
      opacity: 0.4;
    }
    48%, 54% {
      transform: scale(1) translateX(0);
      opacity: 0.5;
    }
    56%, 72% {
      transform: scale(1.15) translateX(25px);
      opacity: 0.7;
    }
    75%, 100% {
      transform: scale(1) translateX(0);
      opacity: 0.5;
    }
  }

  /* Code Enemy */
  .code-enemy {
    position: fixed;
    right: 5%;
    top: 70%;
    z-index: 110;
    transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
    transform: scale(1.2);
    pointer-events: none;
  }

  @keyframes enemy-battle-sequence {
    /* Initial position */
    0%,
    5% {
      transform: translateX(0) rotate(0deg);
    }
    /* Dodge kunais - move side to side quickly */
    8% {
      transform: translateX(-20px) rotate(-5deg);
    }
    12% {
      transform: translateX(20px) rotate(5deg);
    }
    16% {
      transform: translateX(-15px) rotate(-3deg);
    }
    20%,
    22% {
      transform: translateX(0) rotate(0deg);
    }
    /* Cast Amaterasu - charge up */
    25% {
      transform: translateX(0) rotate(0deg) scale(1.1);
    }
    30% {
      transform: translateX(-10px) rotate(-5deg) scale(1);
    }
    35%,
    45% {
      transform: translateX(0) rotate(0deg);
    }
    /* Get hit by Rasenshuriken */
    52% {
      transform: translateX(30px) rotate(15deg);
    }
    56% {
      transform: translateX(-20px) rotate(-10deg);
    }
    60% {
      transform: translateX(10px) rotate(5deg);
    }
    65%,
    100% {
      transform: translateX(0) rotate(0deg);
    }
  }

  .enemy-body {
    width: 120px;
    height: 140px;
    background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
    border: 4px solid #ef4444;
    box-shadow:
      0 0 20px rgba(239, 68, 68, 0.5),
      inset 0 0 20px rgba(239, 68, 68, 0.2);
    position: relative;
    border-radius: 8px;
  }

  .enemy-screen {
    width: 100px;
    height: 80px;
    background: #0a0a0a;
    margin: 10px auto;
    padding: 8px;
    border: 2px solid #ef4444;
    position: relative;
    overflow: hidden;
  }

  .code-line {
    width: 100%;
    height: 6px;
    background: #10b981;
    margin: 4px 0;
    animation: code-scroll 2s linear infinite;
    box-shadow: 0 0 5px rgba(16, 185, 129, 0.5);
  }

  .code-line:nth-child(2) {
    width: 70%;
    animation-delay: 0.2s;
  }

  .code-line:nth-child(3) {
    width: 85%;
    animation-delay: 0.4s;
  }

  .code-line.error {
    background: #ef4444;
    animation: error-blink 1s ease-in-out infinite;
    box-shadow: 0 0 10px rgba(239, 68, 68, 0.8);
  }

  @keyframes code-scroll {
    0% {
      opacity: 0;
      transform: translateX(-100%);
    }
    50% {
      opacity: 1;
    }
    100% {
      opacity: 0;
      transform: translateX(100%);
    }
  }

  @keyframes error-blink {
    0%,
    100% {
      opacity: 1;
    }
    50% {
      opacity: 0.3;
    }
  }

  .enemy-eyes {
    display: flex;
    justify-content: space-around;
    padding: 10px 20px;
  }

  .eye {
    width: 20px;
    height: 20px;
    background: #ef4444;
    border-radius: 50%;
    box-shadow:
      0 0 10px rgba(239, 68, 68, 0.8),
      inset -2px -2px 5px rgba(0, 0, 0, 0.5);
    animation: eye-glow 2s ease-in-out infinite;
  }

  .eye::after {
    content: "";
    display: block;
    width: 8px;
    height: 8px;
    background: #fff;
    border-radius: 50%;
    margin: 6px;
    animation: eye-pupil 3s ease-in-out infinite;
  }

  @keyframes eye-glow {
    0%,
    100% {
      box-shadow: 0 0 10px rgba(239, 68, 68, 0.8);
    }
    50% {
      box-shadow: 0 0 25px rgba(239, 68, 68, 1);
    }
  }

  @keyframes eye-pupil {
    0%,
    100% {
      transform: translate(0, 0);
    }
    25% {
      transform: translate(-2px, 0);
    }
    75% {
      transform: translate(2px, 0);
    }
  }

  .enemy-shadow {
    width: 100px;
    height: 15px;
    background: rgba(0, 0, 0, 0.4);
    border-radius: 50%;
    margin-top: 10px;
    animation: shadow-pulse 1.5s ease-in-out infinite;
  }

  /* Health Bars */
  .health-bar {
    position: fixed;
    width: 200px;
    height: 25px;
    background: rgba(26, 26, 46, 0.85);
    border: 3px solid #fff;
    box-shadow: 
      0 0 15px rgba(0, 0, 0, 0.7),
      inset 0 2px 4px rgba(0, 0, 0, 0.4);
    z-index: 120;
    pointer-events: none;
    border-radius: 5px;
  }

  .player-health {
    top: 10px;
    left: 10px;
  }

  .enemy-health {
    top: 10px;
    right: 10px;
  }

  .health-label {
    position: absolute;
    top: -22px;
    left: 0;
    font-family: "Press Start 2P", monospace;
    font-size: 0.6rem;
    color: #fff;
    text-shadow: 
      2px 2px 0 #000,
      0 0 8px rgba(255, 215, 0, 0.8);
    letter-spacing: 1px;
  }

  .health-fill {
    height: 100%;
    width: 100%;
    background: linear-gradient(90deg, #10b981 0%, #34d399 100%);
    box-shadow: inset 0 2px 4px rgba(255, 255, 255, 0.3);
    transition: width 0.5s ease-out;
  }

  .enemy-health .health-fill {
    background: linear-gradient(90deg, #ef4444 0%, #dc2626 100%);
    transition: width 0.5s ease-out;
  }

  @keyframes health-decrease {
    0%,
    100% {
      width: 100%;
    }
    50% {
      width: 60%;
    }
  }

  @keyframes enemy-health-decrease {
    0%,
    100% {
      width: 100%;
    }
    50% {
      width: 30%;
    }
  }

  /* Battle Effects */
  .battle-effects {
    position: absolute;
    width: 100%;
    height: 100%;
    pointer-events: none;
  }

  .hit-effect {
    position: absolute;
    width: 80px;
    height: 80px;
    right: 15%;
    bottom: 60px;
    background: radial-gradient(
      circle,
      #4a90e2 0%,
      #ff6b35 50%,
      transparent 70%
    );
    border-radius: 50%;
    opacity: 0;
    animation: hit-flash 5s ease-in-out infinite;
  }

  @keyframes hit-flash {
    0%,
    62%,
    100% {
      opacity: 0;
      transform: scale(0);
    }
    64% {
      opacity: 1;
      transform: scale(1.5);
    }
    66% {
      opacity: 0.5;
      transform: scale(2);
    }
    68% {
      opacity: 0;
      transform: scale(2.5);
    }
  }

  .code-particle {
    position: absolute;
    font-family: "Press Start 2P", monospace;
    font-size: 1.5rem;
    color: #a855f7;
    text-shadow: 0 0 10px rgba(168, 85, 247, 0.8);
    animation: particle-float 3s ease-in-out infinite;
    pointer-events: none;
  }

  .code-particle:nth-child(2) {
    top: 20%;
    right: 40%;
    animation-delay: 0.5s;
    color: #10b981;
    text-shadow: 0 0 10px rgba(16, 185, 129, 0.8);
  }

  .code-particle:nth-child(3) {
    top: 60%;
    left: 35%;
    animation-delay: 1s;
    color: #fbbf24;
    text-shadow: 0 0 10px rgba(251, 191, 36, 0.8);
  }

  .code-particle:nth-child(4) {
    top: 40%;
    right: 25%;
    animation-delay: 1.5s;
    color: #3b82f6;
    text-shadow: 0 0 10px rgba(59, 130, 246, 0.8);
  }

  .code-particle:nth-child(5) {
    top: 70%;
    left: 45%;
    animation-delay: 2s;
    color: #ec4899;
    text-shadow: 0 0 10px rgba(236, 72, 153, 0.8);
  }

  @keyframes particle-float {
    0%,
    100% {
      opacity: 0;
      transform: translateY(0) rotate(0deg);
    }
    10% {
      opacity: 1;
    }
    90% {
      opacity: 1;
    }
    100% {
      opacity: 0;
      transform: translateY(-100px) rotate(360deg);
    }
  }

  /* Kunai attacks */
  .kunai {
    position: absolute;
    font-size: 2rem;
    left: 15%;
    bottom: 50px;
    opacity: 0;
    pointer-events: none;
    filter: drop-shadow(0 0 5px rgba(255, 107, 53, 0.8));
  }

  .kunai-1,
  .kunai-2,
  .kunai-3 {
    display: none; /* Hidden - controlled by scroll */
  }

  @keyframes kunai-throw {
    0%,
    2% {
      opacity: 0;
      left: 15%;
      bottom: 50px;
      transform: rotate(0deg) scale(1);
    }
    3% {
      opacity: 1;
    }
    12% {
      opacity: 1;
      left: 70%;
      bottom: 80px;
      transform: rotate(360deg) scale(1);
    }
    14% {
      opacity: 0;
      left: 75%;
      bottom: 85px;
      transform: rotate(400deg) scale(0.8);
    }
    100% {
      opacity: 0;
    }
  }

  /* Amaterasu black flames */
  .amaterasu {
    position: absolute;
    font-size: 3rem;
    right: 15%;
    bottom: 60px;
    opacity: 0;
    pointer-events: none;
    filter: drop-shadow(0 0 15px rgba(220, 20, 60, 0.9));
    color: #8b0000;
  }

  .amaterasu {
    display: none; /* Hidden - controlled by scroll */
  }

  @keyframes amaterasu-cast {
    0%,
    22% {
      opacity: 0;
      right: 15%;
      bottom: 60px;
      transform: scale(0.5);
    }
    24% {
      opacity: 1;
      transform: scale(1.5);
    }
    30% {
      opacity: 1;
      right: 35%;
      bottom: 70px;
      transform: scale(2);
    }
    34% {
      opacity: 1;
      right: 45%;
      bottom: 75px;
      transform: scale(2.2);
    }
    38% {
      opacity: 0;
      right: 50%;
      bottom: 50px;
      transform: scale(1.5);
    }
    100% {
      opacity: 0;
    }
  }

  .amaterasu-flame {
    position: absolute;
    font-size: 2rem;
    opacity: 0;
    pointer-events: none;
    color: #dc143c;
    filter: drop-shadow(0 0 10px rgba(220, 20, 60, 0.8));
  }

  .flame-1,
  .flame-2,
  .flame-3 {
    display: none; /* Hidden - controlled by scroll */
  }

  @keyframes flame-spread {
    0%,
    23% {
      opacity: 0;
      transform: scale(0.3) rotate(0deg);
    }
    25% {
      opacity: 1;
      transform: scale(1) rotate(20deg);
    }
    32% {
      opacity: 1;
      transform: scale(1.3) rotate(-20deg);
    }
    36% {
      opacity: 0;
      transform: scale(0.8) rotate(30deg);
    }
    100% {
      opacity: 0;
    }
  }

  /* Rasenshuriken counter */
  .rasenshuriken {
    position: absolute;
    font-size: 4rem;
    left: 15%;
    bottom: 50px;
    opacity: 0;
    pointer-events: none;
    filter: drop-shadow(0 0 20px rgba(100, 149, 237, 0.9));
  }

  .rasenshuriken {
    display: none; /* Hidden - controlled by scroll */
  }

  @keyframes rasenshuriken-throw {
    0%,
    48% {
      opacity: 0;
      left: 15%;
      bottom: 50px;
      transform: rotate(0deg) scale(0.5);
    }
    50% {
      opacity: 1;
      transform: rotate(0deg) scale(1);
    }
    62% {
      opacity: 1;
      left: 85%;
      bottom: 70px;
      transform: rotate(1080deg) scale(1.5);
    }
    65% {
      opacity: 1;
      transform: rotate(1200deg) scale(2);
    }
    68% {
      opacity: 0;
      left: 90%;
      bottom: 65px;
      transform: rotate(1440deg) scale(0.5);
    }
    100% {
      opacity: 0;
    }
  }

  /* Sprite Effects */
  .sprite-effect {
    position: absolute;
    width: 100px;
    height: 100px;
    opacity: 0;
    pointer-events: none;
    image-rendering: pixelated;
    filter: drop-shadow(0 0 20px rgba(255, 255, 255, 0.8));
  }

  /* Sprite effects for kunai impacts */
  .sprite-1,
  .sprite-2,
  .sprite-3 {
    display: none; /* Hidden - controlled by scroll */
  }

  @keyframes sprite-impact-1 {
    0%, 11% {
      opacity: 0;
      transform: scale(0) rotate(0deg);
    }
    12% {
      opacity: 1;
      transform: scale(0.8) rotate(45deg);
    }
    13% {
      opacity: 1;
      transform: scale(1.2) rotate(90deg);
    }
    14% {
      opacity: 0.8;
      transform: scale(1.5) rotate(135deg);
    }
    15% {
      opacity: 0;
      transform: scale(2) rotate(180deg);
    }
    100% {
      opacity: 0;
    }
  }

  @keyframes sprite-impact-2 {
    0%, 11.15% {
      opacity: 0;
      transform: scale(0) rotate(0deg);
    }
    12.15% {
      opacity: 1;
      transform: scale(0.7) rotate(-30deg);
    }
    13.15% {
      opacity: 1;
      transform: scale(1.3) rotate(-60deg);
    }
    14.15% {
      opacity: 0.7;
      transform: scale(1.6) rotate(-90deg);
    }
    15.15% {
      opacity: 0;
      transform: scale(2.1) rotate(-120deg);
    }
    100% {
      opacity: 0;
    }
  }

  @keyframes sprite-impact-3 {
    0%, 11.3% {
      opacity: 0;
      transform: scale(0) rotate(0deg);
    }
    12.3% {
      opacity: 1;
      transform: scale(0.9) rotate(60deg);
    }
    13.3% {
      opacity: 1;
      transform: scale(1.4) rotate(120deg);
    }
    14.3% {
      opacity: 0.8;
      transform: scale(1.8) rotate(180deg);
    }
    15.3% {
      opacity: 0;
      transform: scale(2.3) rotate(240deg);
    }
    100% {
      opacity: 0;
    }
  }

  /* Sprite effect for Amaterasu flames */
  .sprite-amaterasu {
    display: none; /* Hidden - controlled by scroll */
  }

  @keyframes sprite-amaterasu {
    0%, 29% {
      opacity: 0;
      right: 35%;
      bottom: 70px;
      transform: scale(0) rotate(0deg);
    }
    30% {
      opacity: 0.8;
      transform: scale(1) rotate(180deg);
    }
    32% {
      opacity: 1;
      transform: scale(1.5) rotate(360deg);
    }
    34% {
      opacity: 1;
      right: 45%;
      bottom: 75px;
      transform: scale(2) rotate(540deg);
    }
    36% {
      opacity: 0.7;
      transform: scale(2.5) rotate(720deg);
    }
    38% {
      opacity: 0;
      right: 50%;
      bottom: 50px;
      transform: scale(3) rotate(900deg);
    }
    100% {
      opacity: 0;
    }
  }

  /* Sprite effect for Rasenshuriken impact */
  .sprite-rasenshuriken {
    display: none; /* Hidden - controlled by scroll */
  }

  @keyframes sprite-rasenshuriken {
    0%, 61% {
      opacity: 0;
      right: 15%;
      bottom: 65px;
      transform: scale(0) rotate(0deg);
    }
    62% {
      opacity: 0.7;
      transform: scale(1) rotate(360deg);
    }
    63% {
      opacity: 1;
      transform: scale(1.5) rotate(720deg);
    }
    64% {
      opacity: 1;
      transform: scale(2.2) rotate(1080deg);
    }
    65% {
      opacity: 1;
      transform: scale(3) rotate(1440deg);
    }
    66% {
      opacity: 0.8;
      transform: scale(3.5) rotate(1800deg);
    }
    67% {
      opacity: 0.5;
      transform: scale(4) rotate(2160deg);
    }
    68% {
      opacity: 0;
      right: 15%;
      bottom: 65px;
      transform: scale(5) rotate(2520deg);
    }
    100% {
      opacity: 0;
    }
  }

  /* VS Badge - Hidden */
  .vs-badge {
    display: none;
  }

  .vs-badge::before {
    content: "üç•";
    position: absolute;
    top: -60px;
    left: 50%;
    transform: translateX(-50%);
    font-size: 2rem;
    animation: spin-badge 3s linear infinite;
  }

  @keyframes spin-badge {
    from {
      transform: translateX(-50%) rotate(0deg);
    }
    to {
      transform: translateX(-50%) rotate(360deg);
    }
  }

  @keyframes vs-pulse {
    0%,
    100% {
      transform: translate(-50%, -50%) scale(1);
      filter: brightness(1);
    }
    50% {
      transform: translate(-50%, -50%) scale(1.2);
      filter: brightness(1.5);
    }
  }

  /* Pixel Character (Original - kept for reference) */
  .pixel-character {
    display: flex;
    flex-direction: column;
    align-items: center;
    animation: float 3s ease-in-out infinite;
  }

  @keyframes float {
    0%,
    100% {
      transform: translateY(0px);
    }
    50% {
      transform: translateY(-20px);
    }
  }

  .character-sprite {
    width: 200px;
    height: 250px;
    position: relative;
    image-rendering: pixelated;
  }

  .head {
    position: absolute;
    width: 80px;
    height: 80px;
    background: #ffcc99;
    top: 0;
    left: 50%;
    transform: translateX(-50%);
    box-shadow:
      inset -4px -4px 0 rgba(0, 0, 0, 0.2),
      4px 4px 0 #000;
  }

  .head::before {
    content: "";
    position: absolute;
    width: 60px;
    height: 40px;
    background: #3d2817;
    top: -20px;
    left: 10px;
    box-shadow:
      4px 0 0 #000,
      -4px 0 0 #000;
  }

  .head::after {
    content: "";
    position: absolute;
    width: 12px;
    height: 4px;
    background: #000;
    top: 30px;
    left: 20px;
    border-radius: 2px;
    box-shadow:
      0 0 0 2px #000,
      36px 0 0 #000,
      36px 0 0 2px #000;
  }

  .body {
    position: absolute;
    width: 100px;
    height: 80px;
    background: #6366f1;
    top: 85px;
    left: 50%;
    transform: translateX(-50%);
    box-shadow: 4px 4px 0 #000;
  }

  .arm {
    position: absolute;
    width: 30px;
    height: 70px;
    background: #ffcc99;
    top: 90px;
    box-shadow: 4px 4px 0 #000;
  }

  .arm.left {
    left: 35px;
    animation: wave 1s ease-in-out infinite;
  }

  .arm.right {
    right: 35px;
  }

  @keyframes wave {
    0%,
    100% {
      transform: rotate(0deg);
    }
    50% {
      transform: rotate(-15deg);
    }
  }

  .leg {
    position: absolute;
    width: 35px;
    height: 70px;
    background: #4338ca;
    top: 165px;
    box-shadow: 4px 4px 0 #000;
  }

  .leg.left {
    left: 60px;
  }

  .leg.right {
    right: 60px;
  }

  .character-shadow {
    width: 150px;
    height: 20px;
    background: rgba(0, 0, 0, 0.3);
    border-radius: 50%;
    margin-top: 20px;
    animation: shadow-pulse 3s ease-in-out infinite;
  }

  @keyframes shadow-pulse {
    0%,
    100% {
      transform: scale(1);
      opacity: 0.3;
    }
    50% {
      transform: scale(1.1);
      opacity: 0.5;
    }
  }

  /* Hero Content */
  .hero-content {
    text-align: center;
    max-width: 900px;
    margin: 0 auto;
  }

  .game-text {
    font-family: "Press Start 2P", "Courier New", monospace;
  }

  .pixel-title {
    font-size: clamp(1.5rem, 5vw, 2.5rem);
    color: #fff;
    text-shadow:
      4px 4px 0 #6366f1,
      8px 8px 0 rgba(0, 0, 0, 0.3);
    margin-bottom: 1rem;
    line-height: 1.4;
  }

  .blink {
    animation: blink 1s infinite;
  }

  @keyframes blink {
    0%,
    49% {
      opacity: 1;
    }
    50%,
    100% {
      opacity: 0;
    }
  }

  .pixel-subtitle {
    font-size: 1rem;
    color: #a855f7;
    margin-bottom: 2rem;
    letter-spacing: 2px;
  }

  .stats-bar {
    display: flex;
    gap: 2rem;
    margin-bottom: 2rem;
    flex-wrap: wrap;
    justify-content: center;
  }

  .stat {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
  }

  .stat-label {
    font-size: 0.7rem;
    color: #888;
  }

  .stat-value {
    font-size: 0.9rem;
    color: #f0f0f0;
    padding: 0.5rem 1rem;
    background: rgba(99, 102, 241, 0.2);
    border: 2px solid #6366f1;
    box-shadow: 4px 4px 0 rgba(0, 0, 0, 0.3);
  }

  .action-buttons {
    display: flex;
    gap: 1rem;
    flex-wrap: wrap;
    justify-content: center;
  }

  .pixel-button {
    padding: 1rem 2rem;
    font-family: inherit;
    font-size: 0.8rem;
    text-decoration: none;
    border: 4px solid;
    box-shadow: 6px 6px 0 rgba(0, 0, 0, 0.4);
    transition: all 0.1s;
    cursor: pointer;
    position: relative;
    image-rendering: pixelated;
  }

  .pixel-button:hover {
    transform: translate(2px, 2px);
    box-shadow: 4px 4px 0 rgba(0, 0, 0, 0.4);
  }

  .pixel-button:active {
    transform: translate(4px, 4px);
    box-shadow: 2px 2px 0 rgba(0, 0, 0, 0.4);
  }

  .pixel-button.primary {
    background: linear-gradient(135deg, #ff6b35 0%, #ff8c42 100%);
    color: #fff;
    border-color: #d4521c;
  }

  .pixel-button.secondary {
    background: linear-gradient(135deg, #004e89 0%, #1976d2 100%);
    color: #fff;
    border-color: #003559;
  }

  /* Status Bars */
  .status-bars {
    margin-top: 3rem;
    display: flex;
    flex-direction: column;
    gap: 1rem;
    max-width: 600px;
    margin-left: auto;
    margin-right: auto;
  }

  .status-bar {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
  }

  .bar-label {
    font-family: "Press Start 2P", monospace;
    font-size: 0.7rem;
    color: #888;
  }

  .bar {
    height: 30px;
    background: #1a1a2e;
    border: 3px solid #333;
    position: relative;
    overflow: hidden;
    box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.5);
  }

  .bar-fill {
    height: 100%;
    transition: width 1s ease-out;
    position: relative;
  }

  .bar.health .bar-fill {
    background: linear-gradient(90deg, #ff6b35 0%, #ff8c42 100%);
    box-shadow: 0 0 10px rgba(255, 107, 53, 0.8);
  }

  .bar.mana .bar-fill {
    background: linear-gradient(90deg, #ff4500 0%, #ff6b35 50%, #ffa500 100%);
    box-shadow: 0 0 10px rgba(255, 69, 0, 0.8);
    animation: nine-tails-glow 2s ease-in-out infinite;
  }

  @keyframes nine-tails-glow {
    0%,
    100% {
      box-shadow: 0 0 10px rgba(255, 69, 0, 0.8);
    }
    50% {
      box-shadow:
        0 0 20px rgba(255, 69, 0, 1),
        0 0 30px rgba(255, 107, 53, 0.6);
    }
  }

  /* ===== SECTIONS ===== */
  .game-section {
    padding: 6rem 0;
    position: relative;
    border-top: 4px dashed #ff6b35;
  }

  .game-section::before {
    content: "üçÉ üçÇ üçÉ üçÇ üçÉ";
    position: absolute;
    top: -15px;
    left: 50%;
    transform: translateX(-50%);
    font-size: 1.5rem;
    opacity: 0.3;
    letter-spacing: 1rem;
  }

  .container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 2rem;
  }

  .section-title {
    font-family: "Press Start 2P", monospace;
    font-size: clamp(1.2rem, 4vw, 2rem);
    text-align: center;
    color: #fff;
    margin-bottom: 4rem;
    text-shadow: 4px 4px 0 rgba(0, 0, 0, 0.5);
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 1rem;
  }

  .title-icon {
    font-size: 2rem;
    animation: bounce 2s ease-in-out infinite;
  }

  @keyframes bounce {
    0%,
    100% {
      transform: translateY(0);
    }
    50% {
      transform: translateY(-10px);
    }
  }

  /* ===== SKILLS ===== */
  .skills-section {
    background: linear-gradient(180deg, #2d1810 0%, #1a1a1a 100%);
    position: relative;
  }

  .skills-section::after {
    content: "üó°Ô∏è ‚ö° üî• üí® üåä";
    position: absolute;
    bottom: 2rem;
    left: 50%;
    transform: translateX(-50%);
    font-size: 2rem;
    opacity: 0.1;
    letter-spacing: 2rem;
  }

  .skills-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 2rem;
  }

  .skill-card {
    background: rgba(255, 107, 53, 0.1);
    border: 3px solid #ff6b35;
    padding: 1.5rem;
    box-shadow: 6px 6px 0 rgba(0, 0, 0, 0.3);
    transition: transform 0.2s;
    position: relative;
    overflow: hidden;
  }

  .skill-card::before {
    content: "üçÉ";
    position: absolute;
    top: 5px;
    right: 5px;
    font-size: 1rem;
    opacity: 0.2;
  }

  .skill-card:hover {
    transform: translateY(-4px);
    box-shadow: 8px 8px 0 rgba(255, 107, 53, 0.4);
    border-color: #ff8c42;
  }

  .skill-header {
    display: flex;
    align-items: center;
    gap: 1rem;
    margin-bottom: 1rem;
    font-family: "Press Start 2P", monospace;
  }

  .skill-icon {
    font-size: 1.5rem;
  }

  .skill-name {
    font-size: 0.9rem;
    color: #f0f0f0;
  }

  .skill-bar {
    height: 25px;
    background: #1a1a2e;
    border: 2px solid #333;
    position: relative;
    overflow: hidden;
  }

  .skill-progress {
    height: 100%;
    transition: width 1.5s ease-out;
    display: flex;
    align-items: center;
    justify-content: flex-end;
    padding-right: 0.5rem;
    box-shadow: inset 0 -2px 4px rgba(0, 0, 0, 0.3);
  }

  .skill-level {
    font-family: "Press Start 2P", monospace;
    font-size: 0.7rem;
    color: #fff;
    text-shadow: 1px 1px 0 rgba(0, 0, 0, 0.5);
  }

  /* ===== ACHIEVEMENTS ===== */
  .achievements-section {
    background: #1a1a1a;
    position: relative;
  }

  .achievements-section::before {
    content: "üç• ü¶ä üç• ü¶ä üç•";
    position: absolute;
    top: 5rem;
    left: 0;
    right: 0;
    text-align: center;
    font-size: 3rem;
    opacity: 0.05;
    letter-spacing: 3rem;
  }

  .achievements-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 2rem;
  }

  .achievement-card {
    background: linear-gradient(
      135deg,
      rgba(255, 107, 53, 0.1) 0%,
      rgba(0, 78, 137, 0.1) 100%
    );
    border: 3px solid #ff6b35;
    padding: 2rem;
    text-align: center;
    position: relative;
    transition: all 0.3s;
    box-shadow: 6px 6px 0 rgba(0, 0, 0, 0.3);
  }

  .achievement-card::after {
    content: "üçÉ";
    position: absolute;
    bottom: 10px;
    right: 10px;
    font-size: 1.5rem;
    opacity: 0.2;
  }

  .achievement-card.unlocked:hover {
    transform: scale(1.05) rotate(-2deg);
    box-shadow: 8px 8px 0 rgba(255, 107, 53, 0.4);
    border-color: #ff8c42;
  }

  .achievement-card.locked {
    opacity: 0.3;
    filter: grayscale(1);
  }

  .achievement-icon {
    font-size: 3rem;
    margin-bottom: 1rem;
    filter: drop-shadow(2px 2px 4px rgba(0, 0, 0, 0.5));
  }

  .achievement-title {
    font-family: "Press Start 2P", monospace;
    font-size: 0.8rem;
    color: #f0f0f0;
    margin-bottom: 0.5rem;
    line-height: 1.4;
  }

  .achievement-desc {
    font-size: 0.8rem;
    color: #888;
    line-height: 1.4;
  }

  .unlock-badge {
    position: absolute;
    top: -10px;
    right: -10px;
    background: linear-gradient(135deg, #ff6b35 0%, #ff8c42 100%);
    color: #fff;
    padding: 0.3rem 0.8rem;
    font-family: "Press Start 2P", monospace;
    font-size: 0.6rem;
    border: 2px solid #d4521c;
    box-shadow: 4px 4px 0 rgba(0, 0, 0, 0.3);
    transform: rotate(15deg);
  }

  .unlock-badge::before {
    content: "üç•";
    margin-right: 0.3rem;
  }

  /* ===== EXPERIENCE TIMELINE ===== */
  .experience-section {
    background: linear-gradient(180deg, #1a1a1a 0%, #2d1810 100%);
  }

  .experience-section::before {
    content: "üìñ";
    position: absolute;
    top: 2rem;
    left: 50%;
    transform: translateX(-50%);
    font-size: 5rem;
    opacity: 0.05;
  }

  .timeline {
    position: relative;
    padding-left: 3rem;
  }

  .timeline::before {
    content: "";
    position: absolute;
    left: 0;
    top: 0;
    bottom: 0;
    width: 4px;
    background: linear-gradient(180deg, #ff6b35 0%, #ff8c42 50%, #004e89 100%);
  }

  .timeline-item {
    position: relative;
    margin-bottom: 3rem;
  }

  .timeline-marker {
    position: absolute;
    left: -3.75rem;
    top: 0;
    width: 20px;
    height: 20px;
  }

  .marker-dot {
    display: block;
    width: 20px;
    height: 20px;
    background: #ff6b35;
    border: 4px solid #1a1a1a;
    box-shadow: 0 0 0 2px #ff6b35;
    animation: pulse 2s ease-in-out infinite;
  }

  .marker-dot::after {
    content: "üçÉ";
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-size: 10px;
  }

  @keyframes pulse {
    0%,
    100% {
      box-shadow: 0 0 0 2px #ff6b35;
    }
    50% {
      box-shadow: 0 0 0 8px rgba(255, 107, 53, 0.3);
    }
  }

  .quest-card {
    background: rgba(255, 107, 53, 0.05);
    border: 3px solid #ff6b35;
    padding: 2rem;
    box-shadow: 6px 6px 0 rgba(0, 0, 0, 0.3);
    transition: transform 0.2s;
    position: relative;
  }

  .quest-card::before {
    content: "üçÇ";
    position: absolute;
    top: 10px;
    right: 10px;
    font-size: 1.5rem;
    opacity: 0.15;
  }

  .quest-card:hover {
    transform: translateX(8px);
    box-shadow: 8px 8px 0 rgba(255, 107, 53, 0.4);
    border-color: #ff8c42;
  }

  .quest-header {
    display: flex;
    justify-content: space-between;
    align-items: start;
    margin-bottom: 1rem;
    gap: 1rem;
  }

  .quest-title {
    font-family: "Press Start 2P", monospace;
    font-size: 0.9rem;
    color: #f0f0f0;
    line-height: 1.5;
    flex: 1;
  }

  .quest-status {
    font-family: "Press Start 2P", monospace;
    font-size: 0.6rem;
    color: #ff8c42;
    padding: 0.3rem 0.8rem;
    background: rgba(255, 107, 53, 0.2);
    border: 2px solid #ff6b35;
    white-space: nowrap;
  }

  .quest-status::before {
    content: "‚úì ";
  }

  .quest-status.in-progress {
    color: #10b981;
    background: rgba(16, 185, 129, 0.2);
    border: 2px solid #10b981;
    animation: pulse-progress 2s ease-in-out infinite;
  }

  .quest-status.in-progress::before {
    content: "‚ñ∂ ";
  }

  @keyframes pulse-progress {
    0%,
    100% {
      box-shadow: 0 0 5px rgba(16, 185, 129, 0.5);
    }
    50% {
      box-shadow: 0 0 15px rgba(16, 185, 129, 0.8);
    }
  }

  .quest-details {
    display: flex;
    gap: 2rem;
    margin-bottom: 1rem;
    font-size: 0.9rem;
  }

  .company {
    color: #a855f7;
    font-weight: 600;
  }

  .period {
    color: #888;
  }

  .quest-description {
    color: #ccc;
    line-height: 1.6;
    margin-bottom: 1rem;
  }

  .tech-tags {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
  }

  .tech-tag {
    font-family: "Press Start 2P", monospace;
    font-size: 0.6rem;
    padding: 0.4rem 0.8rem;
    background: rgba(0, 78, 137, 0.2);
    color: #1976d2;
    border: 2px solid #004e89;
  }

  /* ===== PROJECTS ===== */
  .projects-section {
    background: #1a1a1a;
    position: relative;
  }

  .projects-section::after {
    content: "üåÄ ‚ö° üî•";
    position: absolute;
    top: 50%;
    right: 5%;
    font-size: 4rem;
    opacity: 0.05;
    transform: translateY(-50%);
    letter-spacing: 2rem;
  }

  .projects-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
    gap: 2rem;
  }

  .project-card {
    background: linear-gradient(
      135deg,
      rgba(255, 107, 53, 0.1) 0%,
      rgba(0, 78, 137, 0.1) 100%
    );
    border: 3px solid #ff6b35;
    padding: 2rem;
    box-shadow: 8px 8px 0 rgba(0, 0, 0, 0.3);
    transition: all 0.3s;
    display: flex;
    flex-direction: column;
    position: relative;
    overflow: hidden;
  }

  .project-card::before {
    content: "üç•";
    position: absolute;
    top: -20px;
    right: -20px;
    font-size: 6rem;
    opacity: 0.05;
    transform: rotate(15deg);
  }

  .project-card:hover {
    transform: translateY(-8px) rotate(-1deg);
    box-shadow: 12px 12px 0 rgba(255, 107, 53, 0.4);
    border-color: #ff8c42;
  }

  .project-header {
    display: flex;
    justify-content: space-between;
    align-items: start;
    margin-bottom: 1rem;
    gap: 1rem;
  }

  .project-name {
    font-family: "Press Start 2P", monospace;
    font-size: 0.9rem;
    color: #f0f0f0;
    line-height: 1.5;
    flex: 1;
  }

  .project-stars {
    display: flex;
    align-items: center;
    gap: 0.3rem;
    font-family: "Press Start 2P", monospace;
    font-size: 0.7rem;
    color: #ff8c42;
  }

  .project-stars::before {
    content: "üç•";
    margin-right: 0.2rem;
  }

  .star-icon {
    font-size: 1rem;
  }

  .project-description {
    color: #ccc;
    line-height: 1.6;
    margin-bottom: 1rem;
    flex-grow: 1;
  }

  .project-tech {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
    margin-bottom: 1.5rem;
  }

  .tech-badge {
    font-size: 0.75rem;
    padding: 0.3rem 0.8rem;
    background: rgba(0, 78, 137, 0.2);
    color: #1976d2;
    border: 2px solid #004e89;
    font-family: monospace;
  }

  .project-link {
    font-family: "Press Start 2P", monospace;
    font-size: 0.7rem;
    padding: 0.8rem 1.5rem;
    background: linear-gradient(135deg, #ff6b35 0%, #ff8c42 100%);
    color: #fff;
    text-decoration: none;
    border: 3px solid #d4521c;
    box-shadow: 4px 4px 0 rgba(0, 0, 0, 0.3);
    transition: all 0.2s;
    display: inline-block;
    text-align: center;
  }

  .project-link::before {
    content: "üó°Ô∏è ";
  }

  .project-link:hover {
    transform: translate(2px, 2px);
    box-shadow: 2px 2px 0 rgba(0, 0, 0, 0.3);
    background: linear-gradient(135deg, #ff8c42 0%, #ffa500 100%);
  }

  /* ===== CONTACT ===== */
  .contact-section {
    background: linear-gradient(180deg, #2d1810 0%, #1a1a1a 100%);
    position: relative;
  }

  .contact-section::before {
    content: "ü¶ä";
    position: absolute;
    top: 5rem;
    right: 10%;
    font-size: 10rem;
    opacity: 0.03;
  }

  .contact-box {
    max-width: 800px;
    margin: 0 auto;
  }

  .dialog-box {
    background: rgba(0, 0, 0, 0.7);
    border: 4px solid #ff6b35;
    padding: 2rem;
    margin-bottom: 2rem;
    box-shadow: 8px 8px 0 rgba(255, 107, 53, 0.5);
    position: relative;
  }

  .dialog-box::after {
    content: "üç•";
    position: absolute;
    top: -20px;
    right: -20px;
    font-size: 4rem;
    opacity: 0.2;
  }

  .dialog-text {
    font-family: "Press Start 2P", monospace;
    font-size: 0.9rem;
    line-height: 2;
    color: #f0f0f0;
    margin-bottom: 2rem;
  }

  .contact-buttons {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 1rem;
  }

  .contact-btn {
    font-family: "Press Start 2P", monospace;
    font-size: 0.7rem;
    padding: 1rem;
    background: linear-gradient(135deg, #ff6b35 0%, #ff8c42 100%);
    color: #fff;
    text-decoration: none;
    border: 3px solid #d4521c;
    box-shadow: 4px 4px 0 rgba(0, 0, 0, 0.4);
    transition: all 0.2s;
    text-align: center;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .contact-btn:hover {
    transform: translate(2px, 2px);
    box-shadow: 2px 2px 0 rgba(0, 0, 0, 0.4);
    background: linear-gradient(135deg, #ff8c42 0%, #ffa500 100%);
  }

  .game-stats {
    display: flex;
    flex-direction: column;
    gap: 1rem;
  }

  .stat-item {
    display: flex;
    align-items: center;
    gap: 1rem;
    padding: 1rem;
    background: rgba(255, 107, 53, 0.1);
    border: 2px solid #ff6b35;
    font-family: monospace;
  }

  .stat-icon {
    font-size: 1.5rem;
  }

  .stat-text {
    color: #f0f0f0;
  }

  /* ===== CONSOLE HINT ===== */
  .console-hint {
    position: fixed;
    bottom: 2rem;
    right: 2rem;
    font-family: "Press Start 2P", monospace;
    font-size: 0.7rem;
    padding: 1rem;
    background: rgba(0, 0, 0, 0.9);
    color: #ff8c42;
    border: 2px solid #ff6b35;
    box-shadow: 4px 4px 0 rgba(255, 107, 53, 0.5);
    z-index: 100;
    animation: float-hint 2s ease-in-out infinite;
  }

  .console-hint::before {
    content: "ü¶ä";
    margin-right: 0.5rem;
  }

  @keyframes float-hint {
    0%,
    100% {
      transform: translateY(0);
    }
    50% {
      transform: translateY(-5px);
    }
  }

  /* ========================================
     SCROLL-BASED BATTLE EFFECTS
     ======================================== */

  /* Battle Progress Bar */
  .battle-progress-bar {
    position: fixed;
    bottom: 15px;
    left: 50%;
    transform: translateX(-50%);
    width: 50%;
    max-width: 600px;
    height: 35px;
    background: rgba(0, 0, 0, 0.85);
    border: 3px solid #ff6b35;
    border-radius: 18px;
    overflow: hidden;
    box-shadow: 
      0 0 20px rgba(255, 107, 53, 0.6),
      inset 0 2px 5px rgba(0, 0, 0, 0.6);
    z-index: 120;
    pointer-events: none;
  }

  .battle-progress-fill {
    height: 100%;
    width: 0%;
    background: linear-gradient(
      90deg,
      #ff6b35 0%,
      #ff8c42 25%,
      #ffd700 50%,
      #4a90e2 75%,
      #6366f1 100%
    );
    transition: width 0.3s ease-out;
    box-shadow: 
      inset 0 2px 4px rgba(255, 255, 255, 0.3),
      0 0 15px rgba(255, 215, 0, 0.6);
    position: relative;
    overflow: hidden;
  }

  .battle-progress-fill::before {
    content: "";
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(
      90deg,
      transparent,
      rgba(255, 255, 255, 0.4),
      transparent
    );
    animation: progress-shine 2s linear infinite;
  }

  @keyframes progress-shine {
    0% {
      left: -100%;
    }
    100% {
      left: 200%;
    }
  }

  .battle-progress-text {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-family: "Press Start 2P", monospace;
    font-size: 0.7rem;
    color: #fff;
    text-shadow: 
      2px 2px 0 #000,
      0 0 10px rgba(255, 215, 0, 1),
      0 0 20px rgba(255, 107, 53, 1);
    white-space: nowrap;
    z-index: 1;
    pointer-events: none;
    animation: text-pulse 1s ease-in-out infinite;
  }

  @keyframes text-pulse {
    0%, 100% {
      opacity: 1;
      transform: translate(-50%, -50%) scale(1);
    }
    50% {
      opacity: 0.8;
      transform: translate(-50%, -50%) scale(1.05);
    }
  }

  /* Battle arena phases */
  .battle-arena {
    position: fixed;
    top: 5%;
    transition: all 0.3s ease-out;
  }

  .battle-arena[data-phase="kunai-attack"] .player-fighter {
    animation: attack-stance 0.5s ease-out forwards;
  }

  .battle-arena[data-phase="enemy-counter"] .code-enemy {
    animation: enemy-hurt 0.5s ease-out;
  }

  .battle-arena[data-phase="amaterasu"] .code-enemy {
    animation: enemy-attack 0.6s ease-out forwards;
  }

  .battle-arena[data-phase="dodge"] .player-fighter {
    animation: dodge-move 0.7s ease-out forwards;
  }

  .battle-arena[data-phase="rasenshuriken-charge"] .player-fighter {
    animation: charge-power 1s ease-out forwards;
  }

  .battle-arena[data-phase="rasenshuriken-charge"] .player-fighter .chakra-aura {
    opacity: 1 !important;
    animation: chakra-burst 1s ease-out infinite;
  }

  .battle-arena[data-phase="final-attack"] .player-fighter {
    animation: final-strike 1s ease-out forwards;
  }

  .battle-arena[data-phase="victory"] .code-enemy {
    animation: enemy-defeat 1s ease-out forwards;
    filter: grayscale(1) opacity(0.3);
  }

  .battle-arena[data-phase="victory"] .player-fighter {
    animation: victory-pose 1s ease-out forwards;
  }

  /* Scroll kunai effects */
  .scroll-kunai {
    position: fixed;
    font-size: 3rem;
    opacity: 0;
    pointer-events: none;
    filter: drop-shadow(0 0 10px rgba(255, 107, 53, 0.9));
    animation: kunai-scroll-throw 1.5s ease-out forwards;
    z-index: 105;
  }

  @keyframes kunai-scroll-throw {
    0% {
      opacity: 0;
      left: 15%;
      transform: rotate(0deg) scale(1);
    }
    10% {
      opacity: 1;
    }
    80% {
      opacity: 1;
      left: 75%;
      transform: rotate(720deg) scale(1.2);
    }
    100% {
      opacity: 0;
      left: 80%;
      transform: rotate(800deg) scale(0.5);
    }
  }

  /* Scroll flame effects */
  .scroll-flame {
    position: fixed;
    font-size: 3.5rem;
    opacity: 0;
    pointer-events: none;
    color: #dc143c;
    filter: drop-shadow(0 0 18px rgba(220, 20, 60, 0.9));
    animation: flame-scroll-attack 2s ease-out forwards;
    z-index: 105;
  }

  @keyframes flame-scroll-attack {
    0% {
      opacity: 0;
      right: 15%;
      transform: scale(0.5) rotate(0deg);
    }
    15% {
      opacity: 1;
      transform: scale(1.5) rotate(180deg);
    }
    70% {
      opacity: 1;
      right: 60%;
      transform: scale(2) rotate(540deg);
    }
    100% {
      opacity: 0;
      right: 70%;
      transform: scale(1) rotate(720deg);
    }
  }

  /* Scroll Rasenshuriken */
  .scroll-rasenshuriken {
    position: fixed;
    font-size: 6rem;
    opacity: 0;
    pointer-events: none;
    filter: drop-shadow(0 0 35px rgba(100, 149, 237, 1));
    animation: rasenshuriken-scroll-throw 1.8s ease-out forwards;
    z-index: 105;
  }

  @keyframes rasenshuriken-scroll-throw {
    0% {
      opacity: 0;
      left: 15%;
      bottom: 80px;
      transform: rotate(0deg) scale(0.5);
    }
    10% {
      opacity: 1;
      transform: rotate(180deg) scale(1);
    }
    70% {
      opacity: 1;
      left: 82%;
      bottom: 70px;
      transform: rotate(2160deg) scale(2);
    }
    85% {
      opacity: 1;
      transform: rotate(2520deg) scale(2.5);
    }
    100% {
      opacity: 0;
      left: 85%;
      transform: rotate(2880deg) scale(3);
    }
  }

  /* Massive impact effect */
  .scroll-impact {
    position: fixed;
    width: 250px;
    height: 250px;
    background: radial-gradient(
      circle,
      rgba(100, 149, 237, 0.8) 0%,
      rgba(255, 107, 53, 0.6) 30%,
      rgba(255, 215, 0, 0.4) 60%,
      transparent 100%
    );
    border-radius: 50%;
    opacity: 0;
    animation: impact-explosion 1s ease-out forwards;
    z-index: 106;
    pointer-events: none;
  }

  @keyframes impact-explosion {
    0% {
      opacity: 0;
      transform: scale(0) rotate(0deg);
    }
    20% {
      opacity: 1;
      transform: scale(1) rotate(90deg);
    }
    50% {
      opacity: 0.8;
      transform: scale(2) rotate(180deg);
    }
    100% {
      opacity: 0;
      transform: scale(4) rotate(360deg);
    }
  }

  /* Scroll sprite explosions */
  .scroll-sprite-explosion {
    position: fixed;
    width: 150px;
    height: 150px;
    opacity: 0;
    pointer-events: none;
    image-rendering: pixelated;
    filter: drop-shadow(0 0 25px rgba(255, 215, 0, 1));
    animation: sprite-explosion 1.2s ease-out forwards;
    z-index: 107;
  }

  @keyframes sprite-explosion {
    0% {
      opacity: 0;
      transform: scale(0) rotate(0deg);
    }
    30% {
      opacity: 1;
      transform: scale(1.5) rotate(360deg);
    }
    70% {
      opacity: 0.8;
      transform: scale(2.5) rotate(720deg);
    }
    100% {
      opacity: 0;
      transform: scale(4) rotate(1080deg);
    }
  }

  /* Victory banner */
  .victory-banner {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%) scale(0);
    font-family: "Press Start 2P", monospace;
    font-size: 3rem;
    color: #ffd700;
    text-align: center;
    text-shadow:
      5px 5px 0 #000,
      0 0 40px rgba(255, 215, 0, 1),
      0 0 80px rgba(255, 215, 0, 0.8);
    z-index: 130;
    animation: victory-appear 1s ease-out forwards;
    pointer-events: none;
  }

  .victory-banner span {
    display: block;
    font-size: 1.2rem;
    margin-top: 1rem;
    color: #ff6b35;
    text-shadow:
      3px 3px 0 #000,
      0 0 20px rgba(255, 107, 53, 1);
  }

  @keyframes victory-appear {
    0% {
      opacity: 0;
      transform: translate(-50%, -50%) scale(0) rotate(-180deg);
    }
    50% {
      opacity: 1;
      transform: translate(-50%, -50%) scale(1.3) rotate(10deg);
    }
    70% {
      transform: translate(-50%, -50%) scale(0.9) rotate(-5deg);
    }
    100% {
      opacity: 1;
      transform: translate(-50%, -50%) scale(1) rotate(0deg);
    }
  }

  /* Confetti */
  .confetti {
    position: fixed;
    font-size: 2.5rem;
    opacity: 0;
    animation: confetti-fall 2.5s ease-out forwards;
    z-index: 125;
    pointer-events: none;
  }

  @keyframes confetti-fall {
    0% {
      opacity: 0;
      top: -50px;
      transform: rotate(0deg);
    }
    10% {
      opacity: 1;
    }
    90% {
      opacity: 1;
    }
    100% {
      opacity: 0;
      top: 100%;
      transform: rotate(720deg) translateX(100px);
    }
  }

  /* Phase-specific animations */
  @keyframes attack-stance {
    0% {
      left: 5%;
      top: 70%;
      transform: scale(1.2) rotate(0deg);
    }
    50% {
      left: 35%;
      top: 65%;
      transform: scale(1.3) rotate(10deg);
    }
    100% {
      left: 30%;
      top: 68%;
      transform: scale(1.25) rotate(5deg);
    }
  }

  @keyframes enemy-hurt {
    0% {
      right: 5%;
      top: 70%;
      transform: scale(1.2) rotate(0deg);
    }
    25% {
      right: 3%;
      top: 68%;
      transform: scale(1.25) rotate(8deg);
    }
    50% {
      right: 7%;
      top: 72%;
      transform: scale(1.15) rotate(-8deg);
    }
    75% {
      right: 4%;
      top: 69%;
      transform: scale(1.2) rotate(4deg);
    }
    100% {
      right: 5%;
      top: 70%;
      transform: scale(1.2) rotate(0deg);
    }
  }

  @keyframes enemy-attack {
    0% {
      right: 5%;
      top: 70%;
      transform: scale(1.2);
    }
    30% {
      right: 30%;
      top: 60%;
      transform: scale(1.35);
    }
    60% {
      right: 25%;
      top: 65%;
      transform: scale(1.3);
    }
    100% {
      right: 20%;
      top: 68%;
      transform: scale(1.25);
    }
  }

  @keyframes dodge-move {
    0% {
      left: 30%;
      top: 68%;
      transform: scale(1.25) rotate(0deg);
    }
    30% {
      left: 10%;
      top: 30%;
      transform: scale(1.1) rotate(-180deg);
    }
    60% {
      left: 5%;
      top: 10%;
      transform: scale(1) rotate(-360deg);
    }
    100% {
      left: 3%;
      top: 8%;
      transform: scale(1.15) rotate(-540deg);
    }
  }

  @keyframes charge-power {
    0% {
      left: 3%;
      top: 8%;
      transform: scale(1.15);
      filter: brightness(1) drop-shadow(0 5px 10px rgba(0, 0, 0, 0.6));
    }
    50% {
      left: 10%;
      top: 15%;
      transform: scale(1.4);
      filter: brightness(1.8) drop-shadow(0 0 50px rgba(255, 140, 66, 1));
    }
    100% {
      left: 8%;
      top: 12%;
      transform: scale(1.35);
      filter: brightness(1.5) drop-shadow(0 0 40px rgba(255, 140, 66, 0.8));
    }
  }

  @keyframes chakra-burst {
    0%, 100% {
      transform: translateX(-50%) scale(1);
      opacity: 0.6;
    }
    50% {
      transform: translateX(-50%) scale(1.4);
      opacity: 1;
    }
  }

  @keyframes final-strike {
    0% {
      left: 8%;
      top: 12%;
      transform: scale(1.35) rotate(0deg);
    }
    30% {
      left: 40%;
      top: 15%;
      transform: scale(1.5) rotate(20deg);
    }
    60% {
      left: 60%;
      top: 18%;
      transform: scale(1.4) rotate(15deg);
    }
    100% {
      left: 70%;
      top: 20%;
      transform: scale(1.3) rotate(10deg);
    }
  }

  @keyframes enemy-defeat {
    0% {
      right: 20%;
      top: 68%;
      transform: scale(1.25) rotate(0deg);
      opacity: 1;
    }
    30% {
      right: 10%;
      top: 50%;
      transform: scale(1.4) rotate(90deg);
      opacity: 0.9;
    }
    60% {
      right: 5%;
      top: 30%;
      transform: scale(1.2) rotate(180deg);
      opacity: 0.6;
    }
    100% {
      right: 3%;
      top: 10%;
      transform: scale(0.8) rotate(360deg);
      opacity: 0.2;
    }
  }

  @keyframes victory-pose {
    0% {
      left: 70%;
      top: 20%;
      transform: scale(1.3) rotate(10deg);
    }
    40% {
      left: 50%;
      top: 50%;
      transform: scale(1.6) rotate(0deg);
    }
    60% {
      left: 48%;
      top: 48%;
      transform: scale(1.65) rotate(5deg);
    }
    80% {
      left: 49%;
      top: 49%;
      transform: scale(1.55) rotate(-5deg);
    }
    100% {
      left: 50%;
      top: 50%;
      transform: scale(1.6) rotate(0deg);
    }
  }

  /* ===== RESPONSIVE ===== */
  @media (max-width: 768px) {
    .battle-arena {
      width: 95%;
      height: 280px;
      top: 3%;
    }

    .player-fighter {
      left: 10%;
      bottom: 30px;
    }

    .code-enemy {
      right: 10%;
      bottom: 30px;
    }

    .fighter-sprite,
    .enemy-body {
      transform: scale(0.7);
    }

    .vs-badge {
      font-size: 2rem;
    }

    .health-bar {
      width: 100px;
      height: 20px;
      top: -35px;
    }

    .health-label {
      font-size: 0.5rem;
      top: -18px;
    }

    .code-particle {
      font-size: 1rem;
    }

    .character-section {
      margin-top: 300px;
      padding: 1rem 0;
    }

    .hero-content {
      text-align: center;
      padding: 0 1rem;
    }

    .stats-bar,
    .action-buttons {
      justify-content: center;
    }

    .stats-bar {
      gap: 1rem;
    }

    .timeline {
      padding-left: 2rem;
    }

    .timeline-marker {
      left: -2.75rem;
    }

    .console-hint {
      bottom: 1rem;
      right: 1rem;
      left: 1rem;
      text-align: center;
      font-size: 0.6rem;
      padding: 0.8rem;
    }

    .pixel-title {
      font-size: clamp(1rem, 5vw, 1.8rem);
    }

    .section-title {
      font-size: clamp(0.9rem, 4vw, 1.5rem);
      gap: 0.5rem;
    }

    .title-icon {
      font-size: 1.5rem;
    }

    .game-section {
      padding: 4rem 0;
    }

    .character-sprite {
      transform: scale(0.8);
    }
  }

  @media (max-width: 480px) {
    .battle-arena {
      height: 220px;
      top: 2%;
    }

    .player-fighter {
      left: 5%;
      bottom: 20px;
    }

    .code-enemy {
      right: 5%;
      bottom: 20px;
    }

    .fighter-sprite,
    .enemy-body {
      transform: scale(0.5);
    }

    .vs-badge {
      font-size: 1.5rem;
    }

    .health-bar {
      width: 80px;
      height: 18px;
      top: -30px;
    }

    .health-label {
      font-size: 0.4rem;
      top: -16px;
    }

    .character-section {
      margin-top: 240px;
    }

    .container {
      padding: 0 1rem;
    }

    .quest-header {
      flex-direction: column;
      align-items: flex-start;
    }

    .project-header {
      flex-direction: column;
      align-items: flex-start;
    }

    .quest-details {
      flex-direction: column;
      gap: 0.5rem;
    }
  }
</style>

<script>
  // UNIFIED EASTER EGG & ANIMATION SCRIPT
  (function () {
    // Buffers for codes
    let keyBuffer = "";
    const maxBuffer = 24;
    const konamiSeq = [
      "arrowup",
      "arrowup",
      "arrowdown",
      "arrowdown",
      "arrowleft",
      "arrowright",
      "arrowleft",
      "arrowright",
      "b",
      "a",
    ];
    let konamiBuffer: any[] = [];

    // Helper: Fireworks effect
    function createFirework(color: string) {
      const firework = document.createElement("div");
      const randomX = Math.random() * 100;
      const randomY = Math.random() * 100;
      firework.style.cssText = `
        position: fixed; width: 5px; height: 5px; background: ${color}; border-radius: 50%;
        left: ${randomX}%; top: ${randomY}%; box-shadow: 0 0 10px ${color}; pointer-events: none;
        z-index: 9998; animation: firework-explode 1s ease-out forwards;`;
      if (!document.getElementById("firework-animation-style")) {
        const style = document.createElement("style");
        style.id = "firework-animation-style";
        style.textContent = `@keyframes firework-explode {0%{transform:scale(0);opacity:1;}50%{transform:scale(20);opacity:0.8;}100%{transform:scale(40);opacity:0;}}`;
        document.head.appendChild(style);
      }
      document.body.appendChild(firework);
      setTimeout(() => firework.remove(), 1000);
    }

    // Animate cards on scroll
    function initAnimations() {
      const observerOptions = {
        threshold: 0.1,
        rootMargin: "0px 0px -50px 0px",
      };
      const animationObserver = new IntersectionObserver((entries) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            const target = entry.target as HTMLElement;
            target.style.animation = "fadeInUp 0.6s ease-out forwards";
            animationObserver.unobserve(target);
          }
        });
      }, observerOptions);
      const cards = document.querySelectorAll(
        ".skill-card, .achievement-card, .quest-card, .project-card"
      );
      cards.forEach((card) => {
        (card as HTMLElement).style.opacity = "0";
        animationObserver.observe(card);
      });
      if (!document.getElementById("fade-in-animation-style")) {
        const style = document.createElement("style");
        style.id = "fade-in-animation-style";
        style.textContent = `@keyframes fadeInUp {from{opacity:0;transform:translateY(30px);}to{opacity:1;transform:translateY(0);}}`;
        document.head.appendChild(style);
      }
    }

    // Smooth scroll for anchor links
    function initSmoothScroll() {
      document.querySelectorAll('a[href^="#"]').forEach((anchor) => {
        anchor.addEventListener(
          "click",
          function (this: HTMLAnchorElement, e: Event) {
            e.preventDefault();
            const href = this.getAttribute("href");
            if (href && href !== "#") {
              const target = document.querySelector(href);
              if (target) {
                target.scrollIntoView({ behavior: "smooth", block: "start" });
              }
            }
          }
        );
      });
    }

    // EASTER EGG TRIGGERS
    function triggerKonamiText() {
      // Fireworks + achievement popup
      const colors = ["#6366f1", "#a855f7", "#10b981", "#fbbf24"];
      for (let i = 0; i < 30; i++) {
        setTimeout(
          () =>
            createFirework(colors[Math.floor(Math.random() * colors.length)]),
          i * 100
        );
      }
      const achievementContainer = document.createElement("div");
      achievementContainer.innerHTML = `<div class="achievement-unlock" style="position:fixed;top:50%;left:50%;transform:translate(-50%,-50%) scale(0);background:rgba(0,0,0,0.95);padding:2rem;border:4px solid #fbbf24;box-shadow:0 0 50px rgba(251,191,36,0.5);z-index:9999;text-align:center;font-family:'Press Start 2P',monospace;animation:achievement-pop 0.5s forwards;max-width:90%;"><div style="font-size:3rem;margin-bottom:1rem;">üéâ</div><h2 style="color:#fbbf24;font-size:clamp(0.8rem,3vw,1.2rem);margin-bottom:1rem;line-height:1.5;">ACHIEVEMENT UNLOCKED!</h2><p style="color:#fff;font-size:clamp(0.6rem,2vw,0.8rem);line-height:1.8;">Secret Code Master<br>You found the hidden easter egg!</p></div><style>@keyframes achievement-pop{0%{transform:translate(-50%,-50%) scale(0) rotate(-180deg);}60%{transform:translate(-50%,-50%) scale(1.1) rotate(10deg);}100%{transform:translate(-50%,-50%) scale(1) rotate(0deg);}}</style>`;
      document.body.appendChild(achievementContainer);
      setTimeout(() => {
        const achievementEl = achievementContainer.querySelector(
          ".achievement-unlock"
        ) as HTMLElement;
        if (achievementEl) {
          achievementEl.style.transition = "opacity 0.5s, transform 0.5s";
          achievementEl.style.opacity = "0";
          achievementEl.style.transform = "translate(-50%, -50%) scale(0.8)";
        }
        setTimeout(() => achievementContainer.remove(), 500);
      }, 3000);
    }

    function triggerKonamiArrows() {
      // Insert achievement card in grid
      const grid = document.querySelector(".achievements-grid");
      if (!grid) return;
      if (document.getElementById("achv-konami")) return;
      const card = document.createElement("div");
      card.id = "achv-konami";
      card.className = "achievement-card unlocked";
      card.innerHTML = `<div class="achievement-icon">üïπÔ∏è</div><h3 class="achievement-title">Konami Legend</h3><p class="achievement-desc">You found the classic code!</p><div class="unlock-badge">UNLOCKED</div>`;
      grid.insertBefore(card, grid.firstChild);
      card.style.transform = "scale(0.8) rotate(-6deg)";
      card.style.transition = "transform 0.2s ease";
      requestAnimationFrame(
        () => (card.style.transform = "scale(1) rotate(0deg)")
      );
    }

    function activateGodMode() {
      if (!document.body.classList.contains("god-mode")) {
        document.body.classList.add("god-mode");
      }
      const banner = document.createElement("div");
      banner.className = "god-banner";
      banner.textContent = "GOD MODE ACTIVATED";
      document.body.appendChild(banner);
      setTimeout(() => banner.remove(), 2500);
      setTimeout(() => document.body.classList.remove("god-mode"), 10000);
    }

    function activateCRTEffect() {
      let overlay = document.getElementById("crt-overlay");
      if (!overlay) {
        overlay = document.createElement("div");
        overlay.id = "crt-overlay";
        document.body.appendChild(overlay);
      }
      overlay.classList.add("active");
      setTimeout(() => overlay && overlay.classList.remove("active"), 8000);
    }

    function togglePause() {
      const wasPaused = document.body.classList.toggle("paused");
      let overlay = document.querySelector(".pause-overlay");
      if (wasPaused) {
        if (!overlay) {
          overlay = document.createElement("div");
          overlay.className = "pause-overlay";
          overlay.innerHTML = `<div class="pause-box">PAUSED<br/><br/><span style="font-size:0.7rem;color:#9ca3af;">Press P to resume</span></div>`;
          document.body.appendChild(overlay);
        }
      } else if (overlay) {
        overlay.remove();
      }
    }

    function activateBossMode() {
      if (document.body.classList.contains("boss-mode")) return;
      document.body.classList.add("boss-mode");
      spawnBossParticles();
      setTimeout(() => document.body.classList.remove("boss-mode"), 12000);
    }
    function spawnBossParticles() {
      const chars = ["<>", "{}", "()", "[]", ";", "!", "#"];
      for (let i = 0; i < 30; i++) {
        const el = document.createElement("div");
        el.className = "code-particle";
        el.textContent = chars[Math.floor(Math.random() * chars.length)];
        el.style.left = Math.random() * window.innerWidth + "px";
        el.style.top = (Math.random() * window.innerHeight) / 2 + 50 + "px";
        el.style.animationDelay = (Math.random() * 1.2).toFixed(2) + "s";
        document.body.appendChild(el);
        setTimeout(() => el.remove(), 3000);
      }
    }

    function spawnSmiles() {
      const count = 20;
      for (let i = 0; i < count; i++) {
        const s = document.createElement("div");
        s.className = "smiley";
        s.textContent = ":)";
        const left = Math.random() * window.innerWidth;
        const top = window.innerHeight - 40 + Math.random() * 20;
        s.style.left = `${left}px`;
        s.style.top = `${top}px`;
        s.style.fontSize = `${Math.random() * 12 + 10}px`;
        s.style.animationDelay = `${Math.random() * 0.2}s`;
        document.body.appendChild(s);
        setTimeout(() => s.remove(), 1600);
      }
    }

    // Coin shower
    function setupVSBadgeCoinShower() {
      const badge = document.querySelector(".vs-badge");
      if (!badge) return;
      let clicks = 0;
      let timer: string | number | NodeJS.Timeout | null | undefined = null;
      badge.addEventListener("click", function () {
        clicks++;
        if (timer) clearTimeout(timer);
        timer = setTimeout(() => {
          clicks = 0;
        }, 1200);
        if (clicks >= 5) {
          spawnCoins(badge);
          clicks = 0;
        }
      });
    }
    function spawnCoins(sourceEl: Element) {
      const rect = sourceEl.getBoundingClientRect();
      const count = 28;
      for (let i = 0; i < count; i++) {
        const coin = document.createElement("div");
        coin.className = "coin";
        const x = rect.left + rect.width / 2 + (Math.random() - 0.5) * 120;
        const y = rect.top + rect.height / 2 + (Math.random() - 0.5) * 40;
        coin.style.left = `${Math.max(0, Math.min(window.innerWidth - 12, x))}px`;
        coin.style.top = `${Math.max(0, Math.min(window.innerHeight - 12, y))}px`;
        coin.style.animationDelay = `${Math.random() * 0.3}s`;
        document.body.appendChild(coin);
        setTimeout(() => coin.remove(), 1500);
      }
    }

    // Chiptune
    function setupNameDblClickChiptune() {
      const title = document.querySelector(".pixel-title");
      if (!title) return;
      title.addEventListener("dblclick", playChiptune);
    }
    function playChiptune() {
      try {
        const AudioCtor = (window.AudioContext ||
          (window as any).webkitAudioContext) as typeof AudioContext;
        const ctx = new AudioCtor();
        const now = ctx.currentTime;
        const notes = [523.25, 659.25, 783.99, 1046.5];
        notes.forEach((freq, i) => {
          const o = ctx.createOscillator();
          const g = ctx.createGain();
          o.type = "square";
          o.frequency.value = freq;
          o.connect(g);
          g.connect(ctx.destination);
          const t0 = now + i * 0.1;
          const t1 = t0 + 0.08;
          g.gain.setValueAtTime(0.0001, t0);
          g.gain.exponentialRampToValueAtTime(0.3, t0 + 0.01);
          g.gain.exponentialRampToValueAtTime(0.0001, t1);
          o.start(t0);
          o.stop(t1 + 0.02);
        });
        setTimeout(() => ctx.close && ctx.close(), 800);
      } catch (_) {}
    }

    // Skill MAXED
    function setupSkillMaxedPopups() {
      const cards = document.querySelectorAll(".skill-card");
      cards.forEach((card) => {
        card.addEventListener("click", () => {
          // Try both inline style and computed style
          const progress = card.querySelector(".skill-progress") as HTMLElement;
          if (!progress) return;
          let pct = 0;
          if (progress.style.width) {
            pct = parseFloat(progress.style.width);
          } else {
            const computed = window.getComputedStyle(progress);
            const parent = progress.parentElement;
            if (parent && parent.offsetWidth > 0) {
              pct = (parseFloat(computed.width) / parent.offsetWidth) * 100;
            }
          }
          if (!isNaN(pct) && pct >= 95) {
            showMaxedPopup(card);
          }
        });
      });
    }
    function showMaxedPopup(host: Element) {
      if (host.querySelector(".maxed-popup")) return;
      const pop = document.createElement("div");
      pop.className = "maxed-popup";
      pop.textContent = "MAXED OUT!";
      host.appendChild(pop);
      setTimeout(() => pop.remove(), 1800);
    }

    // Naruto easter eggs
    function spawnNarutoRun() {
      const narutoRunner = document.createElement("div");
      narutoRunner.className = "naruto-runner";
      narutoRunner.textContent = "üèÉüí®";
      narutoRunner.style.cssText = `
        position: fixed;
        bottom: 20%;
        left: -60px;
        font-size: 3rem;
        z-index: 9999;
        animation: naruto-run 3s linear forwards;
        transform: scaleX(-1);
      `;
      if (!document.getElementById("naruto-run-style")) {
        const style = document.createElement("style");
        style.id = "naruto-run-style";
        style.textContent = `
          @keyframes naruto-run {
            0% { left: -60px; transform: scaleX(-1) rotate(0deg); }
            50% { transform: scaleX(-1) rotate(-5deg); }
            100% { left: calc(100% + 60px); transform: scaleX(-1) rotate(0deg); }
          }
        `;
        document.head.appendChild(style);
      }
      document.body.appendChild(narutoRunner);
      setTimeout(() => narutoRunner.remove(), 3000);
    }

    function spawnRasengan() {
      const rasengan = document.createElement("div");
      rasengan.className = "rasengan";
      rasengan.innerHTML = "üåÄüí´‚ö°";
      rasengan.style.cssText = `
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%) scale(0);
        font-size: 8rem;
        z-index: 10000;
        animation: rasengan-blast 1.5s ease-out forwards;
        pointer-events: none;
        filter: drop-shadow(0 0 20px #4A90E2);
      `;
      if (!document.getElementById("rasengan-style")) {
        const style = document.createElement("style");
        style.id = "rasengan-style";
        style.textContent = `
          @keyframes rasengan-blast {
            0% { transform: translate(-50%, -50%) scale(0) rotate(0deg); opacity: 1; }
            50% { transform: translate(-50%, -50%) scale(1.5) rotate(720deg); opacity: 1; }
            100% { transform: translate(-50%, -50%) scale(3) rotate(1440deg); opacity: 0; }
          }
        `;
        document.head.appendChild(style);
      }
      document.body.appendChild(rasengan);
      setTimeout(() => rasengan.remove(), 1500);
    }

    function spawnShadowClones() {
      const cloneEmojis = ["ü•∑", "ÔøΩ", "ÔøΩ"];
      for (let i = 0; i < 8; i++) {
        setTimeout(() => {
          const clone = document.createElement("div");
          clone.className = "shadow-clone";
          clone.textContent =
            cloneEmojis[Math.floor(Math.random() * cloneEmojis.length)];
          const angle = (i * 360) / 8;
          const radius = 150;
          clone.style.cssText = `
            position: fixed;
            top: 50%;
            left: 50%;
            font-size: 2.5rem;
            z-index: 9999;
            animation: clone-spawn 1s ease-out forwards;
            pointer-events: none;
            --angle: ${angle}deg;
            --radius: ${radius}px;
          `;
          if (!document.getElementById("clone-spawn-style")) {
            const style = document.createElement("style");
            style.id = "clone-spawn-style";
            style.textContent = `
              @keyframes clone-spawn {
                0% { transform: translate(-50%, -50%) scale(0); opacity: 0; }
                50% { opacity: 1; }
                100% { 
                  transform: translate(
                    calc(-50% + cos(var(--angle)) * var(--radius)),
                    calc(-50% + sin(var(--angle)) * var(--radius))
                  ) scale(1);
                  opacity: 0;
                }
              }
            `;
            document.head.appendChild(style);
          }
          document.body.appendChild(clone);
          setTimeout(() => clone.remove(), 1000);
        }, i * 50);
      }
    }

    function spawnKyuubi() {
      const kyuubi = document.createElement("div");
      kyuubi.innerHTML = "ü¶äüî•üî•üî•";
      kyuubi.style.cssText = `
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%) scale(0);
        font-size: 6rem;
        z-index: 10000;
        animation: kyuubi-appear 2s ease-out forwards;
        pointer-events: none;
        filter: drop-shadow(0 0 30px #FF4500);
      `;
      if (!document.getElementById("kyuubi-style")) {
        const style = document.createElement("style");
        style.id = "kyuubi-style";
        style.textContent = `
          @keyframes kyuubi-appear {
            0% { transform: translate(-50%, -50%) scale(0); opacity: 0; }
            30% { transform: translate(-50%, -50%) scale(1.2); opacity: 1; }
            70% { transform: translate(-50%, -50%) scale(1); opacity: 1; }
            100% { transform: translate(-50%, -50%) scale(0); opacity: 0; }
          }
        `;
        document.head.appendChild(style);
      }
      document.body.appendChild(kyuubi);
      setTimeout(() => kyuubi.remove(), 2000);
    }

    function spawnHokage() {
      const banner = document.createElement("div");
      banner.innerHTML = "üç• HOKAGE MODE ACTIVATED! üç•";
      banner.style.cssText = `
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        font-family: 'Press Start 2P', monospace;
        font-size: 1.5rem;
        color: #FF6B35;
        background: rgba(0, 0, 0, 0.9);
        padding: 2rem;
        border: 4px solid #FF6B35;
        box-shadow: 0 0 30px rgba(255, 107, 53, 0.8);
        z-index: 10000;
        animation: hokage-flash 3s ease-out forwards;
        text-align: center;
        line-height: 1.8;
      `;
      if (!document.getElementById("hokage-style")) {
        const style = document.createElement("style");
        style.id = "hokage-style";
        style.textContent = `
          @keyframes hokage-flash {
            0% { opacity: 0; transform: translate(-50%, -50%) scale(0.5); }
            20% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
            80% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
            100% { opacity: 0; transform: translate(-50%, -50%) scale(0.5); }
          }
        `;
        document.head.appendChild(style);
      }
      document.body.appendChild(banner);
      setTimeout(() => banner.remove(), 3000);
    }

    function spawnSharingan() {
      const sharingan = document.createElement("div");
      sharingan.innerHTML = "üëÅÔ∏èüî¥";
      sharingan.style.cssText = `
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        font-size: 10rem;
        z-index: 10000;
        animation: sharingan-spin 3s ease-out forwards;
        pointer-events: none;
        filter: drop-shadow(0 0 40px #DC143C);
      `;
      if (!document.getElementById("sharingan-style")) {
        const style = document.createElement("style");
        style.id = "sharingan-style";
        style.textContent = `
          @keyframes sharingan-spin {
            0% { opacity: 0; transform: translate(-50%, -50%) rotate(0deg) scale(0); }
            30% { opacity: 1; transform: translate(-50%, -50%) rotate(360deg) scale(1); }
            70% { opacity: 1; transform: translate(-50%, -50%) rotate(720deg) scale(1); }
            100% { opacity: 0; transform: translate(-50%, -50%) rotate(1080deg) scale(0); }
          }
        `;
        document.head.appendChild(style);
      }
      document.body.appendChild(sharingan);
      setTimeout(() => sharingan.remove(), 3000);
    }

    function spawnChidori() {
      const chidori = document.createElement("div");
      chidori.innerHTML = "‚ö°‚ö°‚ö°";
      chidori.style.cssText = `
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        font-size: 8rem;
        z-index: 10000;
        animation: chidori-strike 1s ease-out forwards;
        pointer-events: none;
        filter: drop-shadow(0 0 30px #00BFFF);
      `;
      if (!document.getElementById("chidori-style")) {
        const style = document.createElement("style");
        style.id = "chidori-style";
        style.textContent = `
          @keyframes chidori-strike {
            0% { opacity: 0; transform: translate(-200%, -50%) scale(0.5); }
            50% { opacity: 1; transform: translate(-50%, -50%) scale(1.2); }
            100% { opacity: 0; transform: translate(100%, -50%) scale(0.5); }
          }
        `;
        document.head.appendChild(style);
      }
      document.body.appendChild(chidori);
      setTimeout(() => chidori.remove(), 1000);
    }

    function spawnBelieve() {
      const message = document.createElement("div");
      message.innerHTML = "BELIEVE IT! DATTEBAYO!";
      message.style.cssText = `
        position: fixed;
        top: 30%;
        left: 50%;
        transform: translateX(-50%);
        font-family: 'Press Start 2P', monospace;
        font-size: 2rem;
        color: #FF6B35;
        text-shadow: 4px 4px 0 #000, 0 0 20px rgba(255, 107, 53, 0.8);
        z-index: 10000;
        animation: believe-bounce 2s ease-out forwards;
        pointer-events: none;
      `;
      if (!document.getElementById("believe-style")) {
        const style = document.createElement("style");
        style.id = "believe-style";
        style.textContent = `
          @keyframes believe-bounce {
            0% { opacity: 0; transform: translateX(-50%) translateY(-50px); }
            20% { opacity: 1; transform: translateX(-50%) translateY(0); }
            40% { transform: translateX(-50%) translateY(-20px); }
            60% { transform: translateX(-50%) translateY(0); }
            80% { opacity: 1; transform: translateX(-50%) translateY(0); }
            100% { opacity: 0; transform: translateX(-50%) translateY(50px); }
          }
        `;
        document.head.appendChild(style);
      }
      document.body.appendChild(message);
      setTimeout(() => message.remove(), 2000);
    }

    // KEYBOARD HANDLER
    document.addEventListener("keydown", function (e) {
      const target = e.target as HTMLElement;
      const tag = target && target.tagName ? target.tagName.toLowerCase() : "";
      const isTyping =
        tag === "input" ||
        tag === "textarea" ||
        (target && target.isContentEditable);
      if (isTyping) return;
      // Pause
      if (e.key.toLowerCase() === "p") {
        e.preventDefault();
        togglePause();
        return;
      }
      // Feed buffer
      if (e.key.length === 1) keyBuffer += e.key.toLowerCase();
      if (keyBuffer.length > maxBuffer) keyBuffer = keyBuffer.slice(-maxBuffer);
      // Konami text
      if (keyBuffer.endsWith("konami")) {
        triggerKonamiText();
        keyBuffer = "";
      }
      if (keyBuffer.endsWith("iddqd")) {
        activateGodMode();
        keyBuffer = "";
      }
      if (keyBuffer.endsWith("showtime")) {
        activateCRTEffect();
        keyBuffer = "";
      }
      if (keyBuffer.endsWith(":)")) {
        spawnSmiles();
        keyBuffer = "";
      }
      if (keyBuffer.endsWith("boss")) {
        activateBossMode();
        keyBuffer = "";
      }
      // Naruto triggers
      if (keyBuffer.endsWith("naruto")) {
        spawnNarutoRun();
        keyBuffer = "";
      }
      if (keyBuffer.endsWith("rasengan")) {
        spawnRasengan();
        keyBuffer = "";
      }
      if (keyBuffer.endsWith("kagebunshin")) {
        spawnShadowClones();
        keyBuffer = "";
      }
      if (keyBuffer.endsWith("kyuubi")) {
        spawnKyuubi();
        keyBuffer = "";
      }
      if (keyBuffer.endsWith("hokage")) {
        spawnHokage();
        keyBuffer = "";
      }
      if (keyBuffer.endsWith("sharingan")) {
        spawnSharingan();
        keyBuffer = "";
      }
      if (keyBuffer.endsWith("chidori")) {
        spawnChidori();
        keyBuffer = "";
      }
      if (keyBuffer.endsWith("believe") || keyBuffer.endsWith("dattebayo")) {
        spawnBelieve();
        keyBuffer = "";
      }
      // Konami arrows
      const key = e.key.toLowerCase();
      if (
        ["arrowup", "arrowdown", "arrowleft", "arrowright", "a", "b"].includes(
          key
        )
      ) {
        konamiBuffer.push(key);
        if (konamiBuffer.length > konamiSeq.length)
          konamiBuffer = konamiBuffer.slice(-konamiSeq.length);
        if (konamiBuffer.join("") === konamiSeq.join("")) {
          triggerKonamiArrows();
          konamiBuffer = [];
        }
      }
    });

    // DOM READY
    function domReady(fn: { (): void; (this: Document, ev: Event): any }) {
      if (document.readyState === "loading") {
        document.addEventListener("DOMContentLoaded", fn);
      } else {
        fn();
      }
    }
    domReady(() => {
      initAnimations();
      initSmoothScroll();
      setupVSBadgeCoinShower();
      setupNameDblClickChiptune();
      setupSkillMaxedPopups();
    });
  })();
</script>

<script is:inline>
  // Load Press Start 2P font asynchronously for better performance
  (function () {
    const link = document.createElement("link");
    link.href =
      "https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap";
    link.rel = "stylesheet";
    link.media = "print";
    link.onload = function () {
      this.media = "all";
    };
    document.head.appendChild(link);

    // Fallback for older browsers
    const noscript = document.createElement("noscript");
    const fallbackLink = document.createElement("link");
    fallbackLink.href =
      "https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap";
    fallbackLink.rel = "stylesheet";
    noscript.appendChild(fallbackLink);
    document.head.appendChild(noscript);
  })();
</script>

<style>
  /* ===== EXTRA EASTER EGG EFFECTS ===== */
  body.god-mode .player-fighter .fighter-sprite,
  body.god-mode .code-enemy .enemy-body {
    filter: drop-shadow(0 0 14px #fbbf24) saturate(1.2);
  }

  body.god-mode .vs-badge {
    text-shadow:
      4px 4px 0 #000,
      0 0 24px rgba(251, 191, 36, 0.95),
      0 0 60px rgba(251, 191, 36, 0.8);
  }

  .god-banner {
    position: fixed;
    top: 1rem;
    left: 50%;
    transform: translateX(-50%);
    background: rgba(0, 0, 0, 0.9);
    color: #fbbf24;
    border: 3px solid #f59e0b;
    font-family: "Press Start 2P", monospace;
    font-size: 0.7rem;
    padding: 0.8rem 1rem;
    z-index: 10000;
    box-shadow: 6px 6px 0 rgba(0, 0, 0, 0.6);
    animation: pop-in 0.2s ease-out forwards;
  }

  @keyframes pop-in {
    from {
      transform: translateX(-50%) scale(0.8);
      opacity: 0;
    }
    to {
      transform: translateX(-50%) scale(1);
      opacity: 1;
    }
  }

  #crt-overlay {
    position: fixed;
    inset: 0;
    pointer-events: none;
    z-index: 9998;
    opacity: 0;
    background: repeating-linear-gradient(
      to bottom,
      rgba(255, 255, 255, 0.04) 0px,
      rgba(255, 255, 255, 0.04) 1px,
      transparent 2px
    );
    mix-blend-mode: overlay;
    transition: opacity 0.2s ease;
  }

  #crt-overlay.active {
    opacity: 0.22;
    animation: crt-flicker 0.12s infinite;
  }

  @keyframes crt-flicker {
    0% {
      opacity: 0.18;
    }
    50% {
      opacity: 0.26;
    }
    100% {
      opacity: 0.18;
    }
  }

  .coin {
    position: fixed;
    width: 12px;
    height: 12px;
    background: radial-gradient(circle at 30% 30%, #fff59d, #f59e0b);
    border: 2px solid #b45309;
    border-radius: 50%;
    box-shadow: 0 0 6px rgba(245, 158, 11, 0.6);
    animation: coin-fall 1.2s linear forwards;
    z-index: 9997;
  }

  @keyframes coin-fall {
    0% {
      transform: translateY(-20px) rotate(0deg);
      opacity: 1;
    }
    100% {
      transform: translateY(120vh) rotate(720deg);
      opacity: 0;
    }
  }

  .smiley {
    position: fixed;
    font-family: "Press Start 2P", monospace;
    color: #fbbf24;
    text-shadow: 0 0 8px rgba(251, 191, 36, 0.7);
    z-index: 9997;
    animation: smiley-rise 1.4s ease-out forwards;
  }

  @keyframes smiley-rise {
    0% {
      transform: translateY(20px) scale(0.8);
      opacity: 0;
    }
    20% {
      opacity: 1;
    }
    100% {
      transform: translateY(-120px) scale(1.2);
      opacity: 0;
    }
  }

  /* Pause overlay and global pause state */
  body.paused * {
    animation-play-state: paused !important;
  }

  .pause-overlay {
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0.8);
    z-index: 10001;
    display: flex;
    align-items: center;
    justify-content: center;
    color: #fbbf24;
    font-family: "Press Start 2P", monospace;
    text-align: center;
    padding: 2rem;
  }

  .pause-overlay .pause-box {
    border: 4px solid #f59e0b;
    padding: 1.5rem 2rem;
    background: #111827;
    box-shadow: 8px 8px 0 rgba(0, 0, 0, 0.6);
  }

  /* Boss mode styling */
  body.boss-mode .enemy-body {
    border-color: #06b6d4;
    box-shadow:
      0 0 24px rgba(6, 182, 212, 0.8),
      inset 0 0 24px rgba(6, 182, 212, 0.3);
  }

  body.boss-mode .enemy-screen {
    border-color: #06b6d4;
  }

  @keyframes enemy-rage {
    0% {
      transform: translateX(0) rotate(0deg);
    }
    20% {
      transform: translateX(-8px) rotate(-3deg);
    }
    40% {
      transform: translateX(8px) rotate(3deg);
    }
    60% {
      transform: translateX(-8px) rotate(-3deg);
    }
    80% {
      transform: translateX(8px) rotate(3deg);
    }
    100% {
      transform: translateX(0) rotate(0deg);
    }
  }

  body.boss-mode .code-enemy {
    animation: enemy-rage 0.8s ease-in-out infinite;
  }

  /* Skill MAXED popup */
  .skill-card {
    position: relative;
  }
  .maxed-popup {
    position: absolute;
    top: -12px;
    right: -12px;
    background: #10b981;
    color: #fff;
    border: 3px solid #059669;
    font-family: "Press Start 2P", monospace;
    font-size: 0.6rem;
    padding: 0.3rem 0.6rem;
    box-shadow: 6px 6px 0 rgba(0, 0, 0, 0.4);
    transform: rotate(-6deg);
    animation: pop-in 0.15s ease-out forwards;
  }
</style>

<script>
  // ===== EXTRA EASTER EGGS =====
  (function () {
    // Shared key buffer for multiple codes
    let keyBuffer = "";
    const maxBuffer = 24;
    // Arrow-based Konami sequence
    const konamiSeq = [
      "arrowup",
      "arrowup",
      "arrowdown",
      "arrowdown",
      "arrowleft",
      "arrowright",
      "arrowleft",
      "arrowright",
      "b",
      "a",
    ];
    let konamiBuffer: string[] = [];

    function pushKey(k: string): void {
      if (!k || k.length > 1) return; // ignore non-character keys
      keyBuffer += k.toLowerCase();
      if (keyBuffer.length > maxBuffer) keyBuffer = keyBuffer.slice(-maxBuffer);
      checkSequences();
    }

    function checkSequences() {
      if (keyBuffer.endsWith("iddqd")) {
        activateGodMode();
        keyBuffer = "";
      } else if (keyBuffer.endsWith("showtime")) {
        activateCRTEffect();
        keyBuffer = "";
      } else if (keyBuffer.endsWith(":)")) {
        spawnSmiles();
        keyBuffer = "";
      } else if (keyBuffer.endsWith("boss")) {
        activateBossMode();
        keyBuffer = "";
      }
    }

    document.addEventListener("keydown", function (e: KeyboardEvent) {
      const tag = (e.target as HTMLElement)?.tagName?.toLowerCase();
      const isTyping =
        tag === "input" ||
        tag === "textarea" ||
        (e.target as HTMLElement)?.isContentEditable;
      // Pause toggle with 'p'
      if (e.key.toLowerCase() === "p" && !isTyping) {
        e.preventDefault();
        togglePause();
        return;
      }

      // Feed general buffer (only characters)
      if (e.key.length === 1) pushKey(e.key);

      // Feed konami buffer (accept arrows & letters)
      const key = e.key.toLowerCase();
      if (
        key === "arrowup" ||
        key === "arrowdown" ||
        key === "arrowleft" ||
        key === "arrowright" ||
        key === "a" ||
        key === "b"
      ) {
        konamiBuffer.push(key);
        if (konamiBuffer.length > konamiSeq.length)
          konamiBuffer = konamiBuffer.slice(-konamiSeq.length);
        if (konamiBuffer.join("") === konamiSeq.join("")) {
          unlockKonamiAchievement();
          konamiBuffer = [];
        }
      }
    });

    // God Mode: glow + banner for a short duration
    function activateGodMode() {
      if (!document.body.classList.contains("god-mode")) {
        document.body.classList.add("god-mode");
      }
      const banner = document.createElement("div");
      banner.className = "god-banner";
      banner.textContent = "GOD MODE ACTIVATED";
      document.body.appendChild(banner);
      setTimeout(() => banner.remove(), 2500);
      setTimeout(() => document.body.classList.remove("god-mode"), 10000);
    }

    // CRT effect overlay for a few seconds
    function activateCRTEffect() {
      let overlay = document.getElementById("crt-overlay");
      if (!overlay) {
        overlay = document.createElement("div");
        overlay.id = "crt-overlay";
        document.body.appendChild(overlay);
      }
      overlay.classList.add("active");
      setTimeout(() => overlay && overlay.classList.remove("active"), 8000);
    }

    function togglePause(): void {
      const wasPaused = document.body.classList.toggle("paused");
      let overlay = document.querySelector(
        ".pause-overlay"
      ) as HTMLElement | null;
      if (wasPaused) {
        if (!overlay) {
          overlay = document.createElement("div");
          overlay.className = "pause-overlay";
          overlay.innerHTML = `<div class="pause-box">PAUSED<br/><br/><span style="font-size:0.7rem;color:#9ca3af;">Press P to resume</span></div>`;
          document.body.appendChild(overlay);
        }
      } else if (overlay) {
        overlay.remove();
      }
    }

    // VS badge multi-click -> coin shower
    function setupVSBadgeCoinShower(): void {
      const badge = document.querySelector(".vs-badge");
      if (!badge) return;
      let clicks = 0;
      let timer: number | null = null;
      badge.addEventListener("click", function () {
        clicks++;
        if (timer) clearTimeout(timer);
        timer = window.setTimeout(() => {
          clicks = 0;
        }, 1200);
        if (clicks >= 5) {
          spawnCoins(badge as HTMLElement);
          clicks = 0;
        }
      });
    }

    function spawnCoins(sourceEl: HTMLElement): void {
      const rect = sourceEl.getBoundingClientRect();
      const count = 28;
      for (let i = 0; i < count; i++) {
        const coin = document.createElement("div");
        coin.className = "coin";
        const x = rect.left + rect.width / 2 + (Math.random() - 0.5) * 120;
        const y = rect.top + rect.height / 2 + (Math.random() - 0.5) * 40;
        coin.style.left = `${Math.max(0, Math.min(window.innerWidth - 12, x))}px`;
        coin.style.top = `${Math.max(0, Math.min(window.innerHeight - 12, y))}px`;
        coin.style.animationDelay = `${Math.random() * 0.3}s`;
        document.body.appendChild(coin);
        setTimeout(() => coin.remove(), 1500);
      }
    }

    // Double-click name -> tiny chiptune
    function setupNameDblClickChiptune(): void {
      const title = document.querySelector(".pixel-title");
      if (!title) return;
      title.addEventListener("dblclick", playChiptune);
    }

    function playChiptune(): void {
      try {
        const AudioCtor = (window.AudioContext ||
          (window as any).webkitAudioContext) as typeof AudioContext;
        const ctx: AudioContext = new AudioCtor();
        const now = ctx.currentTime;
        const notes = [523.25, 659.25, 783.99, 1046.5]; // C5 E5 G5 C6
        notes.forEach((freq, i) => {
          const o = ctx.createOscillator();
          const g = ctx.createGain();
          o.type = "square";
          o.frequency.value = freq;
          o.connect(g);
          g.connect(ctx.destination);
          const t0 = now + i * 0.1;
          const t1 = t0 + 0.08;
          g.gain.setValueAtTime(0.0001, t0);
          g.gain.exponentialRampToValueAtTime(0.3, t0 + 0.01);
          g.gain.exponentialRampToValueAtTime(0.0001, t1);
          o.start(t0);
          o.stop(t1 + 0.02);
        });
        setTimeout(() => ctx.close && ctx.close(), 800);
      } catch (_) {
        // ignore audio errors
      }
    }

    // Typing ":)" -> smiley confetti
    function spawnSmiles() {
      const count = 20;
      for (let i = 0; i < count; i++) {
        const s = document.createElement("div");
        s.className = "smiley";
        s.textContent = ":)";
        const left = Math.random() * window.innerWidth;
        const top = window.innerHeight - 40 + Math.random() * 20;
        s.style.left = `${left}px`;
        s.style.top = `${top}px`;
        s.style.fontSize = `${Math.random() * 12 + 10}px`;
        s.style.animationDelay = `${Math.random() * 0.2}s`;
        document.body.appendChild(s);
        setTimeout(() => s.remove(), 1600);
      }
    }

    // Boss mode activation
    function activateBossMode(): void {
      if (document.body.classList.contains("boss-mode")) return;
      document.body.classList.add("boss-mode");
      spawnBossParticles();
      setTimeout(() => document.body.classList.remove("boss-mode"), 12000);
    }

    function spawnBossParticles(): void {
      const chars = ["<>", "{}", "()", "[]", ";", "!", "#"];
      for (let i = 0; i < 30; i++) {
        const el = document.createElement("div");
        el.className = "code-particle";
        el.textContent = chars[Math.floor(Math.random() * chars.length)];
        el.style.left = Math.random() * window.innerWidth + "px";
        el.style.top = (Math.random() * window.innerHeight) / 2 + 50 + "px";
        el.style.animationDelay = (Math.random() * 1.2).toFixed(2) + "s";
        document.body.appendChild(el);
        setTimeout(() => el.remove(), 3000);
      }
    }

    // Insert Konami achievement card into Achievements grid
    function unlockKonamiAchievement(): void {
      const grid = document.querySelector(".achievements-grid");
      if (!grid) return;
      if (document.getElementById("achv-konami")) return; // avoid duplicates
      const card = document.createElement("div");
      card.id = "achv-konami";
      card.className = "achievement-card unlocked";
      card.innerHTML = `
        <div class="achievement-icon">üïπÔ∏è</div>
        <h3 class="achievement-title">Konami Legend</h3>
        <p class="achievement-desc">You found the classic code!</p>
        <div class="unlock-badge">UNLOCKED</div>
      `;
      grid.insertBefore(card, grid.firstChild);
      // quick pop feedback
      card.style.transform = "scale(0.8) rotate(-6deg)";
      card.style.transition = "transform 0.2s ease";
      requestAnimationFrame(
        () => (card.style.transform = "scale(1) rotate(0deg)")
      );
    }

    // Skill MAXED popup for >=95%
    function setupSkillMaxedPopups(): void {
      const cards = document.querySelectorAll(".skill-card");
      cards.forEach((card) => {
        card.addEventListener("click", () => {
          const progress = (card as HTMLElement).querySelector(
            ".skill-progress"
          ) as HTMLElement | null;
          if (!progress) return;
          const width = progress.style.width || "0%";
          const pct = parseFloat(width);
          if (!isNaN(pct) && pct >= 95) {
            showMaxedPopup(card as HTMLElement);
          }
        });
      });
    }

    function showMaxedPopup(host: HTMLElement): void {
      if (host.querySelector(".maxed-popup")) return;
      const pop = document.createElement("div");
      pop.className = "maxed-popup";
      pop.textContent = "MAXED OUT!";
      host.appendChild(pop);
      setTimeout(() => pop.remove(), 1800);
    }

    // Init click listeners on DOM ready
    if (document.readyState === "loading") {
      document.addEventListener("DOMContentLoaded", () => {
        setupVSBadgeCoinShower();
        setupNameDblClickChiptune();
        setupSkillMaxedPopups();
      });
    } else {
      setupVSBadgeCoinShower();
      setupNameDblClickChiptune();
      setupSkillMaxedPopups();
    }
  })();
</script>
